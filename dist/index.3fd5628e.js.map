{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-8bbc95322b127736.js","node_modules/tweakpane/dist/tweakpane.js","node_modules/@swc/helpers/src/_class_private_field_get.js","node_modules/@swc/helpers/src/_class_private_field_set.js","node_modules/@swc/helpers/src/_class_private_method_get.js","node_modules/@swc/helpers/src/_define_property.js","node_modules/@tweakpane/plugin-essentials/dist/tweakpane-plugin-essentials.js","node_modules/gl-matrix/esm/common.js","node_modules/gl-matrix/esm/mat4.js","node_modules/gl-matrix/esm/mat3.js","node_modules/gl-matrix/esm/vec3.js","node_modules/gl-matrix/esm/vec4.js","node_modules/gl-matrix/esm/quat.js","src/orbit-control.js","src/rounded-box-geometry.js","src/ssao-demo.js","src/shader/color.vert","src/shader/color.frag","src/shader/composite.vert","src/shader/composite.frag","src/shader/ssao.vert","src/shader/ssao.frag","src/shader/bilateral-gaussian-blur-horizontal.vert","src/shader/bilateral-gaussian-blur-horizontal.frag","src/shader/bilateral-gaussian-blur-vertical.vert","src/shader/bilateral-gaussian-blur-vertical.frag","node_modules/@parcel/runtime-js/lib/runtime-5e7b3f30867f63fc.js","src/app.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"e5iw0\\\":\\\"index.3fd5628e.js\\\",\\\"4MRyY\\\":\\\"studio024.20e5a2d1.jpg\\\"}\"));","/*! Tweakpane 3.0.7 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$p = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser ? canvasElement.getContext('2d') : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$o = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$o('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$o(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$o(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$o('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            bindValueMap(this, 'expanded', () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            });\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.set('shouldFixHeight', false);\n            foldable.set('expandedHeight', null);\n            foldable.set('completed', true);\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params || {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(blade) {\n            var _a;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = blade !== null && blade !== void 0 ? blade : null;\n            (_a = this.blade_) === null || _a === void 0 ? void 0 : _a.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            if (bc.parent) {\n                bc.parent.remove(bc);\n            }\n            bc['parent_'] = this;\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            bc['parent_'] = null;\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack(config.root ? undefined : config.blade);\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            this.className_ = ClassName(config.viewName || 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$n = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$n('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$m = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$m(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const itemsElem = doc.createElement('div');\n            itemsElem.classList.add(className$k('i'));\n            this.element.appendChild(itemsElem);\n            this.itemsElement = itemsElem;\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const empty = createValue(true);\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onPageSelectedChange_ = this.onPageSelectedChange_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.empty_ = empty;\n            this.applyPages_();\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index !== null && opt_index !== void 0 ? opt_index : this.pageSet_.items.length);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        applyPages_() {\n            this.keepSelection_();\n            this.empty_.rawValue = this.pageSet_.items.length === 0;\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            pc.props.value('selected').emitter.on('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            this.rackController.rack.remove(pc.contentController);\n            pc.props\n                .value('selected')\n                .emitter.off('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        keepSelection_() {\n            if (this.pageSet_.items.length === 0) {\n                return;\n            }\n            const firstSelIndex = this.pageSet_.items.findIndex((pc) => pc.props.get('selected'));\n            if (firstSelIndex < 0) {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === 0);\n                });\n            }\n            else {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === firstSelIndex);\n                });\n            }\n        }\n        onPageSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.pageSet_.items.findIndex((pc) => pc.props.value('selected') === ev.sender);\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === index);\n                });\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.options = options;\n        }\n        constrain(value) {\n            const opts = this.options;\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findListItems(constraint) {\n        const c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$5(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$5(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHsl(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgb(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsv(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgb(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsv(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHsl(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsv,\n            rgb: hslToRgb,\n        },\n        hsv: {\n            hsl: hsvToHsl,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgb,\n        },\n        rgb: {\n            hsl: rgbToHsl,\n            hsv: rgbToHsv,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function convertColorMode(components, fromMode, toMode) {\n        return MODE_CONVERTER_MAP[fromMode][toMode](...components);\n    }\n\n    const CONSTRAINT_MAP = {\n        hsl: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        hsv: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        rgb: (comps) => {\n            var _a;\n            return [\n                constrainRange(comps[0], 0, 255),\n                constrainRange(comps[1], 0, 255),\n                constrainRange(comps[2], 0, 255),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n    };\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        constructor(comps, mode) {\n            this.mode_ = mode;\n            this.comps_ = CONSTRAINT_MAP[mode](comps);\n        }\n        static black() {\n            return new Color([0, 0, 0], 'rgb');\n        }\n        static fromObject(obj) {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb');\n        }\n        static toRgbaObject(color) {\n            return color.toRgbaObject();\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode_ !== v2.mode_) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        get mode() {\n            return this.mode_;\n        }\n        getComponents(opt_mode) {\n            return appendAlphaComponent(convertColorMode(removeAlphaComponent(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);\n        }\n        toRgbaObject() {\n            const rgbComps = this.getComponents('rgb');\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    const NOTATION_TO_PARSER_MAP = {\n        'func.rgb': (text) => {\n            const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.rgba': (text) => {\n            const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.hsl': (text) => {\n            const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'func.hsla': (text) => {\n            const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'hex.rgb': (text) => {\n            const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                ], 'rgb');\n            }\n            return null;\n        },\n        'hex.rgba': (text) => {\n            const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                    mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                    mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            return null;\n        },\n    };\n    function getColorNotation(text) {\n        const notations = Object.keys(NOTATION_TO_PARSER_MAP);\n        return notations.reduce((result, notation) => {\n            if (result) {\n                return result;\n            }\n            const subparser = NOTATION_TO_PARSER_MAP[notation];\n            return subparser(text) ? notation : null;\n        }, null);\n    }\n    const CompositeColorParser = (text) => {\n        const notation = getColorNotation(text);\n        return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;\n    };\n    function hasAlphaComponent(notation) {\n        return (notation === 'func.hsla' ||\n            notation === 'func.rgba' ||\n            notation === 'hex.rgba');\n    }\n    function colorFromString(value) {\n        if (typeof value === 'string') {\n            const cv = CompositeColorParser(value);\n            if (cv) {\n                return cv;\n            }\n        }\n        return Color.black();\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value) {\n        const formatter = createNumberFormatter(0);\n        const comps = removeAlphaComponent(value.getComponents('rgb')).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function colorToFunctionalRgbaString(value) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(0);\n        const comps = value.getComponents('rgb').map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    const NOTATION_TO_STRINGIFIER_MAP = {\n        'func.hsl': colorToFunctionalHslString,\n        'func.hsla': colorToFunctionalHslaString,\n        'func.rgb': colorToFunctionalRgbString,\n        'func.rgba': colorToFunctionalRgbaString,\n        'hex.rgb': colorToHexRgbString,\n        'hex.rgba': colorToHexRgbaString,\n    };\n    function getColorStringifier(notation) {\n        return NOTATION_TO_STRINGIFIER_MAP[notation];\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    const FORMATTER = createNumberFormatter(0);\n    const MODE_TO_CONSTRAINT_MAP = {\n        rgb: () => {\n            return new RangeConstraint({ min: 0, max: 255 });\n        },\n        hsl: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n        hsv: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n    };\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: 1,\n                formatter: FORMATTER,\n            }),\n            value: createValue(0, {\n                constraint: MODE_TO_CONSTRAINT_MAP[config.colorMode](index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(d.point.x, 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgb(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new RangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value);\n        }\n        return Color.black();\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(notation) {\n        const stringify = getColorStringifier(notation);\n        return (target, value) => {\n            writePrimitive(target, stringify(value));\n        };\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha) {\n        return supportsAlpha ? writeRgbaColorObject : writeRgbColorObject;\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        return 'alpha' in inputParams && inputParams.alpha === true;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!('view' in params)) {\n                return null;\n            }\n            if (params.view !== 'color') {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromObject,\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue)),\n        },\n        controller: (args) => {\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: formatter,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const notation = getColorNotation(value);\n            if (!notation) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromString,\n            equals: Color.equals,\n            writer: (args) => {\n                const notation = getColorNotation(args.initialValue);\n                if (!notation) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return createColorStringWriter(notation);\n            },\n        },\n        controller: (args) => {\n            const notation = getColorNotation(args.initialValue);\n            if (!notation) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = getColorStringifier(notation);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: hasAlphaComponent(notation),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function createConstraint$4(params) {\n        const constraints = [];\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function findRange(constraint) {\n        const c = constraint ? findConstraint(constraint, RangeConstraint) : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(constraint) {\n        const [min, max] = findRange(constraint);\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a, _b;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_b = ('format' in args.params ? args.params.format : undefined)) !== null && _b !== void 0 ? _b : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            if (c && findConstraint(c, RangeConstraint)) {\n                const [min, max] = estimateSuitableRange(c);\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: ValueMap.fromObject({\n                        maxValue: max,\n                        minValue: min,\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint$2(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$3(params) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint$2('x' in params ? params.x : undefined),\n                createDimensionConstraint$2('y' in params ? params.y : undefined),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createDimensionConstraint$1(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$2(params) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint$1('x' in params ? params.x : undefined),\n                createDimensionConstraint$1('y' in params ? params.y : undefined),\n                createDimensionConstraint$1('z' in params ? params.z : undefined),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$1(value.rawValue.x, c.components[0]),\n                    createAxis$1(value.rawValue.y, c.components[1]),\n                    createAxis$1(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createDimensionConstraint(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$1(params) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined),\n                createDimensionConstraint('y' in params ? params.y : undefined),\n                createDimensionConstraint('z' in params ? params.z : undefined),\n                createDimensionConstraint('w' in params ? params.w : undefined),\n            ],\n        });\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n            minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label || args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result ||\n                createInputBindingController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result ||\n                createMonitorBindingController(plugin, {\n                    document: document,\n                    params: params,\n                    target: target,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                createBladeController(plugin, {\n                    document: document,\n                    params: params,\n                }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                plugin.api({\n                    controller: bc,\n                    pool: this,\n                }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const ic = new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: normalizeListOptions(args.params.options),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach((target) => {\n            const value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const v = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: ValueMap.fromObject({\n                    maxValue: args.params.max,\n                    minValue: args.params.min,\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, v),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(v),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a;\n            const config = opt_config || {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = config.container || createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b,.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-fldv_b,.tp-rotv_b,.tp-ckbv_i,.tp-coltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dv_b:disabled{opacity:0.5}.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-colswv_sw:hover,.tp-p2dpv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-colswv_sw:focus,.tp-p2dpv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-colswv_sw:active,.tp-p2dpv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-colswv_sw:disabled,.tp-p2dpv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, rgba(187,188,196,0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187,188,196,0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187,188,196,0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187,188,196,0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187,188,196,0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187,188,196,0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187,188,196,0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187,188,196,0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(0,0,0,0.2))}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\\'\\';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c,.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c{display:none}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-coltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-coltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-coltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-coltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-coltxtv_w,.tp-pndtxtv{display:flex}.tp-coltxtv_c,.tp-pndtxtv_a{width:100%}.tp-coltxtv_c+.tp-coltxtv_c,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:\\'\\';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-colswv.tp-v-disabled{opacity:0.5}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-us) * 3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:\\'\\';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.0.7');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","export default function _classPrivateFieldGet(receiver, privateMap) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return privateMap.get(receiver).value;\n}\n","export default function _classPrivateFieldSet(receiver, privateMap, value) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to set private field on non-instance\");\n  }\n\n  var descriptor = privateMap.get(receiver);\n\n  if (!descriptor.writable) {\n    throw new TypeError(\"attempted to set read only private field\");\n  }\n\n  descriptor.value = value;\n  return value;\n}\n","export default function _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return fn;\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.TweakpaneEssentialsPlugin = {}));\n}(this, (function (exports) { 'use strict';\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose$1(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose$1(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$g = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$g('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$g('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$f = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$f(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$f(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$e = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$e('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$e(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$e(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$e('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            bindValueMap(this, 'expanded', () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            });\n        }\n    }\n    function createFoldable(expanded) {\n        return Foldable.create(expanded);\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.set('shouldFixHeight', false);\n            foldable.set('expandedHeight', null);\n            foldable.set('completed', true);\n        });\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const className$d = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$d(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$c = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$c(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$b = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$b('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_);\n            element.addEventListener('touchmove', this.onTouchMove_);\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    const className$a = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a(), className$a(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$a(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$a('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$a());\n            this.inputElement.classList.add(className$a('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$a('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$a('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$a('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$a('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$a(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$a(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$9 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$9('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className$8 = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$8('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className$8('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className$8('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className$8('t', 'a'))) {\n                tooltipElem.classList.add(className$8('t', 'a'), className$8('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className$8('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    class ButtonCellApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class TpButtonGridEvent extends TpEvent {\n        constructor(target, cell, index) {\n            super(target);\n            this.cell = cell;\n            this.index = index;\n        }\n    }\n\n    class ButtonGridApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.cellToApiMap_ = new Map();\n            this.emitter_ = new Emitter();\n            const gc = this.controller_.valueController;\n            gc.cellControllers.forEach((cc, i) => {\n                const api = new ButtonCellApi(cc);\n                this.cellToApiMap_.set(cc, api);\n                cc.emitter.on('click', () => {\n                    const x = i % gc.size[0];\n                    const y = Math.floor(i / gc.size[0]);\n                    this.emitter_.emit('click', {\n                        event: new TpButtonGridEvent(this, api, [x, y]),\n                    });\n                });\n            });\n        }\n        cell(x, y) {\n            const gc = this.controller_.valueController;\n            const cc = gc.cellControllers[y * gc.size[0] + x];\n            return this.cellToApiMap_.get(cc);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class ButtonGridController {\n        constructor(doc, config) {\n            this.size = config.size;\n            const [w, h] = this.size;\n            const bcs = [];\n            for (let y = 0; y < h; y++) {\n                for (let x = 0; x < w; x++) {\n                    const bc = new ButtonController(doc, {\n                        props: ValueMap.fromObject(Object.assign({}, config.cellConfig(x, y))),\n                        viewProps: ViewProps.create(),\n                    });\n                    bcs.push(bc);\n                }\n            }\n            this.cellCs_ = bcs;\n            this.viewProps = ViewProps.create();\n            this.viewProps.handleDispose(() => {\n                this.cellCs_.forEach((c) => {\n                    c.viewProps.set('disposed', true);\n                });\n            });\n            this.view = new PlainView(doc, {\n                viewProps: this.viewProps,\n                viewName: 'btngrid',\n            });\n            this.view.element.style.gridTemplateColumns = `repeat(${w}, 1fr)`;\n            this.cellCs_.forEach((bc) => {\n                this.view.element.appendChild(bc.view.element);\n            });\n        }\n        get cellControllers() {\n            return this.cellCs_;\n        }\n    }\n\n    const ButtonGridBladePlugin = {\n        id: 'buttongrid',\n        type: 'blade',\n        // TODO:\n        css: '.tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                cells: p.required.function,\n                size: p.required.array(p.required.number),\n                view: p.required.constant('buttongrid'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonGridController(args.document, {\n                    cellConfig: args.params.cells,\n                    size: args.params.size,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonGridController)) {\n                return null;\n            }\n            return new ButtonGridApi(args.controller);\n        },\n    };\n\n    class CubicBezierApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.controller_.valueController.value.emitter.on(eventName, (ev) => {\n                bh(new TpChangeEvent(this, ev.rawValue, undefined, ev.options.last));\n            });\n            return this;\n        }\n    }\n\n    function interpolate(x1, x2, t) {\n        return x1 * (1 - t) + x2 * t;\n    }\n    const MAX_ITERATION = 20;\n    const X_DELTA = 0.001;\n    const CACHE_RESOLUTION = 100;\n    function y(cb, x) {\n        let dt = 0.25;\n        let t = 0.5;\n        let y = -1;\n        for (let i = 0; i < MAX_ITERATION; i++) {\n            const [tx, ty] = cb.curve(t);\n            t += dt * (tx < x ? +1 : -1);\n            y = ty;\n            dt *= 0.5;\n            if (Math.abs(x - tx) < X_DELTA) {\n                break;\n            }\n        }\n        return y;\n    }\n    class CubicBezier {\n        constructor(x1 = 0, y1 = 0, x2 = 1, y2 = 1) {\n            this.cache_ = [];\n            this.comps_ = [x1, y1, x2, y2];\n        }\n        get x1() {\n            return this.comps_[0];\n        }\n        get y1() {\n            return this.comps_[1];\n        }\n        get x2() {\n            return this.comps_[2];\n        }\n        get y2() {\n            return this.comps_[3];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            if (!Array.isArray(obj)) {\n                return false;\n            }\n            return (typeof obj[0] === 'number' &&\n                typeof obj[1] === 'number' &&\n                typeof obj[2] === 'number' &&\n                typeof obj[3] === 'number');\n        }\n        static equals(v1, v2) {\n            return (v1.x1 === v2.x1 && v1.y1 === v2.y1 && v1.x2 === v2.x2 && v1.y2 === v2.y2);\n        }\n        curve(t) {\n            const x01 = interpolate(0, this.x1, t);\n            const y01 = interpolate(0, this.y1, t);\n            const x12 = interpolate(this.x1, this.x2, t);\n            const y12 = interpolate(this.y1, this.y2, t);\n            const x23 = interpolate(this.x2, 1, t);\n            const y23 = interpolate(this.y2, 1, t);\n            const xr0 = interpolate(x01, x12, t);\n            const yr0 = interpolate(y01, y12, t);\n            const xr1 = interpolate(x12, x23, t);\n            const yr1 = interpolate(y12, y23, t);\n            return [interpolate(xr0, xr1, t), interpolate(yr0, yr1, t)];\n        }\n        y(x) {\n            if (this.cache_.length === 0) {\n                const cache = [];\n                for (let i = 0; i < CACHE_RESOLUTION; i++) {\n                    cache.push(y(this, mapRange(i, 0, CACHE_RESOLUTION - 1, 0, 1)));\n                }\n                this.cache_ = cache;\n            }\n            return this.cache_[Math.round(mapRange(constrainRange(x, 0, 1), 0, 1, 0, CACHE_RESOLUTION - 1))];\n        }\n        toObject() {\n            return [this.comps_[0], this.comps_[1], this.comps_[2], this.comps_[3]];\n        }\n    }\n    const CubicBezierAssembly = {\n        toComponents: (p) => p.toObject(),\n        fromComponents: (comps) => new CubicBezier(...comps),\n    };\n\n    function cubicBezierToString(cb) {\n        const formatter = createNumberFormatter(2);\n        const comps = cb.toObject().map((c) => formatter(c));\n        return `cubic-bezier(${comps.join(', ')})`;\n    }\n    const COMPS_EMPTY = [0, 0.5, 0.5, 1];\n    function cubicBezierFromString(text) {\n        const m = text.match(/^cubic-bezier\\s*\\(\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*,\\s*([0-9.]+)\\s*\\)$/);\n        if (!m) {\n            return new CubicBezier(...COMPS_EMPTY);\n        }\n        const comps = [m[1], m[2], m[3], m[4]].reduce((comps, comp) => {\n            if (!comps) {\n                return null;\n            }\n            const n = Number(comp);\n            if (isNaN(n)) {\n                return null;\n            }\n            return [...comps, n];\n        }, []);\n        return new CubicBezier(...(comps !== null && comps !== void 0 ? comps : COMPS_EMPTY));\n    }\n\n    const className$7 = ClassName('cbz');\n    class CubicBezierView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindClassModifiers(this.element);\n            config.foldable.bindExpandedClass(this.element, className$7(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$7(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$7('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$7('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            const iconElem = doc.createElementNS(SVG_NS, 'svg');\n            iconElem.innerHTML = '<path d=\"M2 13C8 13 8 3 14 3\"/>';\n            buttonElem.appendChild(iconElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$7('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$7('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$6 = ClassName('cbzp');\n    class CubicBezierPickerView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const graphElem = doc.createElement('div');\n            graphElem.classList.add(className$6('g'));\n            this.element.appendChild(graphElem);\n            this.graphElement = graphElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$6('t'));\n            this.element.appendChild(textElem);\n            this.textElement = textElem;\n        }\n    }\n\n    function waitToBeAddedToDom(elem, callback) {\n        const ob = new MutationObserver((ml) => {\n            for (const m of ml) {\n                if (m.type !== 'childList') {\n                    continue;\n                }\n                m.addedNodes.forEach((elem) => {\n                    if (!elem.contains(elem)) {\n                        return;\n                    }\n                    callback();\n                    ob.disconnect();\n                });\n            }\n        });\n        const doc = elem.ownerDocument;\n        ob.observe(doc.body, {\n            attributes: true,\n            childList: true,\n            subtree: true,\n        });\n    }\n\n    const className$5 = ClassName('cbzg');\n    // TODO: Apply to core\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    class CubicBezierGraphView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$5('p'));\n            this.element.appendChild(previewElem);\n            this.previewElement = previewElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$5('g'));\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'path');\n            guideElem.classList.add(className$5('u'));\n            this.svgElem_.appendChild(guideElem);\n            this.guideElem_ = guideElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            lineElem.classList.add(className$5('l'));\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            this.handleElems_ = [doc.createElement('div'), doc.createElement('div')];\n            this.handleElems_.forEach((elem) => {\n                elem.classList.add(className$5('h'));\n                this.element.appendChild(elem);\n            });\n            this.vectorElems_ = [\n                doc.createElementNS(SVG_NS, 'line'),\n                doc.createElementNS(SVG_NS, 'line'),\n            ];\n            this.vectorElems_.forEach((elem) => {\n                elem.classList.add(className$5('v'));\n                this.svgElem_.appendChild(elem);\n            });\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_.bind(this));\n            this.sel_ = config.selection;\n            this.handleElems_.forEach((elem, index) => {\n                bindValue(this.sel_, compose((selection) => selection === index, valueToClassName(elem, className$5('h', 'sel'))));\n            });\n            waitToBeAddedToDom(this.element, () => {\n                this.refresh();\n            });\n        }\n        getVertMargin_(h) {\n            return h * 0.25;\n        }\n        valueToPosition(x, y) {\n            const bounds = this.element.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const vm = this.getVertMargin_(h);\n            return {\n                x: mapRange(x, 0, 1, 0, w),\n                y: mapRange(y, 0, 1, h - vm, vm),\n            };\n        }\n        positionToValue(x, y) {\n            const bounds = this.element.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const vm = this.getVertMargin_(h);\n            return {\n                x: constrainRange(mapRange(x, 0, w, 0, 1), 0, 1),\n                y: mapRange(y, h - vm, vm, 0, 1),\n            };\n        }\n        refresh() {\n            this.guideElem_.setAttributeNS(null, 'd', [0, 1]\n                .map((index) => {\n                const p1 = this.valueToPosition(0, index);\n                const p2 = this.valueToPosition(1, index);\n                return [`M ${p1.x},${p1.y}`, `L ${p2.x},${p2.y}`].join(' ');\n            })\n                .join(' '));\n            const bezier = this.value_.rawValue;\n            const points = [];\n            let t = 0;\n            for (;;) {\n                const p = this.valueToPosition(...bezier.curve(t));\n                points.push([p.x, p.y].join(','));\n                if (t >= 1) {\n                    break;\n                }\n                t = Math.min(t + 0.05, 1);\n            }\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const obj = bezier.toObject();\n            [0, 1].forEach((index) => {\n                const p1 = this.valueToPosition(index, index);\n                const p2 = this.valueToPosition(obj[index * 2], obj[index * 2 + 1]);\n                const vElem = this.vectorElems_[index];\n                vElem.setAttributeNS(null, 'x1', String(p1.x));\n                vElem.setAttributeNS(null, 'y1', String(p1.y));\n                vElem.setAttributeNS(null, 'x2', String(p2.x));\n                vElem.setAttributeNS(null, 'y2', String(p2.y));\n                const hElem = this.handleElems_[index];\n                hElem.style.left = `${p2.x}px`;\n                hElem.style.top = `${p2.y}px`;\n            });\n        }\n        onValueChange_() {\n            this.refresh();\n        }\n    }\n\n    const TICK_COUNT = 24;\n    const PREVIEW_DELAY = 400;\n    const PREVIEW_DURATION = 1000;\n    const className$4 = ClassName('cbzprv');\n    class CubicBezierPreviewView {\n        constructor(doc, config) {\n            this.stopped_ = true;\n            this.startTime_ = -1;\n            this.onDispose_ = this.onDispose_.bind(this);\n            this.onTimer_ = this.onTimer_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$4('g'));\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const ticksElem = doc.createElementNS(SVG_NS, 'path');\n            ticksElem.classList.add(className$4('t'));\n            this.svgElem_.appendChild(ticksElem);\n            this.ticksElem_ = ticksElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$4('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_);\n            config.viewProps.handleDispose(this.onDispose_);\n            waitToBeAddedToDom(this.element, () => {\n                this.refresh();\n            });\n        }\n        play() {\n            this.stop();\n            this.updateMarker_(0);\n            this.markerElem_.classList.add(className$4('m', 'a'));\n            this.startTime_ = new Date().getTime() + PREVIEW_DELAY;\n            this.stopped_ = false;\n            requestAnimationFrame(this.onTimer_);\n        }\n        stop() {\n            this.stopped_ = true;\n            this.markerElem_.classList.remove(className$4('m', 'a'));\n        }\n        onDispose_() {\n            this.stop();\n        }\n        updateMarker_(progress) {\n            const p = this.value_.rawValue.y(constrainRange(progress, 0, 1));\n            this.markerElem_.style.left = `${p * 100}%`;\n        }\n        refresh() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const w = bounds.width;\n            const h = bounds.height;\n            const ds = [];\n            const bezier = this.value_.rawValue;\n            for (let i = 0; i < TICK_COUNT; i++) {\n                const px = mapRange(i, 0, TICK_COUNT - 1, 0, 1);\n                const x = mapRange(bezier.y(px), 0, 1, 0, w);\n                ds.push(`M ${x},0 v${h}`);\n            }\n            this.ticksElem_.setAttributeNS(null, 'd', ds.join(' '));\n        }\n        onTimer_() {\n            if (this.startTime_ === null) {\n                return;\n            }\n            const dt = new Date().getTime() - this.startTime_;\n            const p = dt / PREVIEW_DURATION;\n            this.updateMarker_(p);\n            if (dt > PREVIEW_DURATION + PREVIEW_DELAY) {\n                this.stop();\n            }\n            if (!this.stopped_) {\n                requestAnimationFrame(this.onTimer_);\n            }\n        }\n        onValueChange_() {\n            this.refresh();\n            this.play();\n        }\n    }\n\n    function getDistance(x1, y1, x2, y2) {\n        const dx = x2 - x1;\n        const dy = y2 - y1;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n    function lockAngle(x1, y1, x2, y2) {\n        const d = getDistance(x1, y1, x2, y2);\n        const a = Math.atan2(y2 - y1, x2 - x1);\n        const la = (Math.round(a / (Math.PI / 4)) * Math.PI) / 4;\n        return {\n            x: x1 + Math.cos(la) * d,\n            y: y1 + Math.sin(la) * d,\n        };\n    }\n    class CubicBezierGraphController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.sel_ = createValue(0);\n            this.viewProps = config.viewProps;\n            this.view = new CubicBezierGraphView(doc, {\n                selection: this.sel_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n            this.prevView_ = new CubicBezierPreviewView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.prevView_.element.addEventListener('mousedown', (ev) => {\n                ev.stopImmediatePropagation();\n                ev.preventDefault();\n                this.prevView_.play();\n            });\n            this.view.previewElement.appendChild(this.prevView_.element);\n            const ptHandler = new PointerHandler(this.view.element);\n            ptHandler.emitter.on('down', this.onPointerDown_);\n            ptHandler.emitter.on('move', this.onPointerMove_);\n            ptHandler.emitter.on('up', this.onPointerUp_);\n        }\n        refresh() {\n            this.view.refresh();\n            this.prevView_.refresh();\n            this.prevView_.play();\n        }\n        updateValue_(point, locksAngle, opts) {\n            const index = this.sel_.rawValue;\n            const comps = this.value.rawValue.toObject();\n            const vp = this.view.positionToValue(point.x, point.y);\n            const v = locksAngle ? lockAngle(index, index, vp.x, vp.y) : vp;\n            comps[index * 2] = v.x;\n            comps[index * 2 + 1] = v.y;\n            this.value.setRawValue(new CubicBezier(...comps), opts);\n        }\n        onPointerDown_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            const bezier = this.value.rawValue;\n            const p1 = this.view.valueToPosition(bezier.x1, bezier.y1);\n            const d1 = getDistance(data.point.x, data.point.y, p1.x, p1.y);\n            const p2 = this.view.valueToPosition(bezier.x2, bezier.y2);\n            const d2 = getDistance(data.point.x, data.point.y, p2.x, p2.y);\n            this.sel_.rawValue = d1 <= d2 ? 0 : 1;\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            const data = ev.data;\n            if (!data.point) {\n                return;\n            }\n            this.updateValue_(data.point, ev.shiftKey, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const index = this.sel_.rawValue;\n            const comps = this.value.rawValue.toObject();\n            comps[index * 2] += getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            comps[index * 2 + 1] += getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            this.value.setRawValue(new CubicBezier(...comps), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const xStep = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            const yStep = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (xStep === 0 && yStep === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class CubicBezierPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CubicBezierPickerView(doc, {\n                viewProps: this.viewProps,\n            });\n            this.gc_ = new CubicBezierGraphController(doc, {\n                baseStep: config.axis.baseStep,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.graphElement.appendChild(this.gc_.view.element);\n            const xAxis = Object.assign(Object.assign({}, config.axis), { constraint: new RangeConstraint({ max: 1, min: 0 }) });\n            const yAxis = Object.assign(Object.assign({}, config.axis), { constraint: undefined });\n            this.tc_ = new PointNdTextController(doc, {\n                assembly: CubicBezierAssembly,\n                axes: [xAxis, yAxis, xAxis, yAxis],\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.tc_.view.element);\n        }\n        get allFocusableElements() {\n            return [\n                this.gc_.view.element,\n                ...this.tc_.view.textViews.map((v) => v.inputElement),\n            ];\n        }\n        refresh() {\n            this.gc_.refresh();\n        }\n    }\n\n    class CubicBezierController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = createFoldable(config.expanded);\n            this.view = new CubicBezierView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('blur', this.onButtonBlur_);\n            this.view.buttonElement.addEventListener('click', this.onButtonClick_);\n            this.tc_ = new TextController(doc, {\n                parser: cubicBezierFromString,\n                props: ValueMap.fromObject({\n                    formatter: cubicBezierToString,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.tc_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new CubicBezierPickerController(doc, {\n                axis: config.axis,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                bindValue(this.popC_.shows, (shows) => {\n                    if (shows) {\n                        pickerC.refresh();\n                    }\n                });\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onButtonBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const nextTarget = forceCast(ev.relatedTarget);\n            if (!nextTarget || !this.popC_.view.element.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                // Next target is in the popup\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                // Next target is the trigger button\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            if (ev.key === 'Escape') {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n    }\n\n    function createConstraint$1() {\n        return new PointNdConstraint({\n            assembly: CubicBezierAssembly,\n            components: [0, 1, 2, 3].map((index) => index % 2 === 0\n                ? new RangeConstraint({\n                    min: 0,\n                    max: 1,\n                })\n                : undefined),\n        });\n    }\n    const CubicBezierBladePlugin = {\n        id: 'cubic-bezier',\n        type: 'blade',\n        css: '.tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                value: p.required.array(p.required.number),\n                view: p.required.constant('cubicbezier'),\n                expanded: p.optional.boolean,\n                label: p.optional.string,\n                picker: p.optional.custom((v) => {\n                    return v === 'inline' || v === 'popup' ? v : undefined;\n                }),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const rv = new CubicBezier(...args.params.value);\n            const v = createValue(rv, {\n                constraint: createConstraint$1(),\n                equals: CubicBezier.equals,\n            });\n            const vc = new CubicBezierController(args.document, {\n                axis: {\n                    baseStep: 0.1,\n                    textProps: ValueMap.fromObject({\n                        draggingScale: 0.01,\n                        formatter: createNumberFormatter(2),\n                    }),\n                },\n                expanded: (_a = args.params.expanded) !== null && _a !== void 0 ? _a : false,\n                pickerLayout: (_b = args.params.picker) !== null && _b !== void 0 ? _b : 'popup',\n                value: v,\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof CubicBezierController)) {\n                return null;\n            }\n            return new CubicBezierApi(args.controller);\n        },\n    };\n\n    class FpsGraphBladeApi extends BladeApi {\n        begin() {\n            this.controller_.valueController.begin();\n        }\n        end() {\n            this.controller_.valueController.end();\n        }\n    }\n\n    const MAX_TIMESTAMPS = 20;\n    class Fpswatch {\n        constructor() {\n            this.start_ = null;\n            this.duration_ = 0;\n            this.fps_ = null;\n            this.frameCount_ = 0;\n            this.timestamps_ = [];\n        }\n        get duration() {\n            return this.duration_;\n        }\n        get fps() {\n            return this.fps_;\n        }\n        begin(now) {\n            this.start_ = now.getTime();\n        }\n        calculateFps_(nowTime) {\n            if (this.timestamps_.length === 0) {\n                return null;\n            }\n            const ts = this.timestamps_[0];\n            return (1000 * (this.frameCount_ - ts.frameCount)) / (nowTime - ts.time);\n        }\n        compactTimestamps_() {\n            if (this.timestamps_.length <= MAX_TIMESTAMPS) {\n                return;\n            }\n            const len = this.timestamps_.length - MAX_TIMESTAMPS;\n            this.timestamps_.splice(0, len);\n            const df = this.timestamps_[0].frameCount;\n            this.timestamps_.forEach((ts) => {\n                ts.frameCount -= df;\n            });\n            this.frameCount_ -= df;\n        }\n        end(now) {\n            if (this.start_ === null) {\n                return;\n            }\n            const t = now.getTime();\n            this.duration_ = t - this.start_;\n            this.start_ = null;\n            this.fps_ = this.calculateFps_(t);\n            this.timestamps_.push({\n                frameCount: this.frameCount_,\n                time: t,\n            });\n            ++this.frameCount_;\n            this.compactTimestamps_();\n        }\n    }\n\n    const className$3 = ClassName('fps');\n    class FpsView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            config.viewProps.bindClassModifiers(this.element);\n            this.graphElement = doc.createElement('div');\n            this.graphElement.classList.add(className$3('g'));\n            this.element.appendChild(this.graphElement);\n            const labelElement = doc.createElement('div');\n            labelElement.classList.add(className$3('l'));\n            this.element.appendChild(labelElement);\n            const valueElement = doc.createElement('span');\n            valueElement.classList.add(className$3('v'));\n            valueElement.textContent = '--';\n            labelElement.appendChild(valueElement);\n            this.valueElement = valueElement;\n            const unitElement = doc.createElement('span');\n            unitElement.classList.add(className$3('u'));\n            unitElement.textContent = 'FPS';\n            labelElement.appendChild(unitElement);\n        }\n    }\n\n    class FpsGraphController {\n        constructor(doc, config) {\n            this.stopwatch_ = new Fpswatch();\n            this.onTick_ = this.onTick_.bind(this);\n            this.ticker_ = config.ticker;\n            this.ticker_.emitter.on('tick', this.onTick_);\n            this.value_ = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new FpsView(doc, {\n                viewProps: this.viewProps,\n            });\n            this.graphC_ = new GraphLogController(doc, {\n                formatter: createNumberFormatter(0),\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value_,\n                viewProps: this.viewProps,\n            });\n            this.view.graphElement.appendChild(this.graphC_.view.element);\n            this.viewProps.handleDispose(() => {\n                this.graphC_.viewProps.set('disposed', true);\n                this.ticker_.dispose();\n            });\n        }\n        begin() {\n            this.stopwatch_.begin(new Date());\n        }\n        end() {\n            this.stopwatch_.end(new Date());\n        }\n        onTick_() {\n            const fps = this.stopwatch_.fps;\n            if (fps !== null) {\n                const buffer = this.value_.rawValue;\n                this.value_.rawValue = createPushedBuffer(buffer, fps);\n                this.view.valueElement.textContent = fps.toFixed(0);\n            }\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    const FpsGraphBladePlugin = {\n        id: 'fpsgraph',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('fpsgraph'),\n                interval: p.optional.number,\n                label: p.optional.string,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b, _c, _d;\n            const interval = (_a = args.params.interval) !== null && _a !== void 0 ? _a : 500;\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new FpsGraphController(args.document, {\n                    lineCount: (_b = args.params.lineCount) !== null && _b !== void 0 ? _b : 2,\n                    maxValue: (_c = args.params.max) !== null && _c !== void 0 ? _c : 90,\n                    minValue: (_d = args.params.min) !== null && _d !== void 0 ? _d : 0,\n                    ticker: createTicker(args.document, interval),\n                    value: initializeBuffer(80),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof FpsGraphController)) {\n                return null;\n            }\n            return new FpsGraphBladeApi(args.controller);\n        },\n    };\n\n    class Interval {\n        constructor(min, max) {\n            this.min = min;\n            this.max = max;\n        }\n        static isObject(obj) {\n            if (typeof obj !== 'object' || obj === null) {\n                return false;\n            }\n            const min = obj.min;\n            const max = obj.max;\n            if (typeof min !== 'number' || typeof max !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.min === v2.min && v1.max === v2.max;\n        }\n        get length() {\n            return this.max - this.min;\n        }\n        toObject() {\n            return {\n                min: this.min,\n                max: this.max,\n            };\n        }\n    }\n    const IntervalAssembly = {\n        fromComponents: (comps) => new Interval(comps[0], comps[1]),\n        toComponents: (p) => [p.min, p.max],\n    };\n\n    class IntervalConstraint {\n        constructor(edge) {\n            this.edge = edge;\n        }\n        constrain(value) {\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            if (value.min <= value.max) {\n                return new Interval((_b = (_a = this.edge) === null || _a === void 0 ? void 0 : _a.constrain(value.min)) !== null && _b !== void 0 ? _b : value.min, (_d = (_c = this.edge) === null || _c === void 0 ? void 0 : _c.constrain(value.max)) !== null && _d !== void 0 ? _d : value.max);\n            }\n            const c = (value.min + value.max) / 2;\n            return new Interval((_f = (_e = this.edge) === null || _e === void 0 ? void 0 : _e.constrain(c)) !== null && _f !== void 0 ? _f : c, (_h = (_g = this.edge) === null || _g === void 0 ? void 0 : _g.constrain(c)) !== null && _h !== void 0 ? _h : c);\n        }\n    }\n\n    const className$2 = ClassName('rsltxt');\n    class RangeSliderTextView {\n        constructor(doc, config) {\n            this.sliderView_ = config.sliderView;\n            this.textView_ = config.textView;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$2('s'));\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$2('t'));\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    const className$1 = ClassName('rsl');\n    class RangeSliderView {\n        constructor(doc, config) {\n            this.maxValue_ = config.maxValue;\n            this.minValue_ = config.minValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            this.value_ = config.value;\n            this.value_.emitter.on('change', this.onValueChange_.bind(this));\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$1('t'));\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$1('b'));\n            trackElem.appendChild(barElem);\n            this.barElement = barElem;\n            const knobElems = ['min', 'max'].map((modifier) => {\n                const elem = doc.createElement('div');\n                elem.classList.add(className$1('k'), className$1('k', modifier));\n                trackElem.appendChild(elem);\n                return elem;\n            });\n            this.knobElements = [knobElems[0], knobElems[1]];\n            this.update();\n        }\n        valueToX_(value) {\n            return (constrainRange(mapRange(value, this.minValue_, this.maxValue_, 0, 1), 0, 1) * 100);\n        }\n        update() {\n            const v = this.value_.rawValue;\n            if (v.length === 0) {\n                this.element.classList.add(className$1(undefined, 'zero'));\n            }\n            else {\n                this.element.classList.remove(className$1(undefined, 'zero'));\n            }\n            const xs = [this.valueToX_(v.min), this.valueToX_(v.max)];\n            this.barElement.style.left = `${xs[0]}%`;\n            this.barElement.style.right = `${100 - xs[1]}%`;\n            this.knobElements.forEach((elem, index) => {\n                elem.style.left = `${xs[index]}%`;\n            });\n        }\n        onValueChange_() {\n            this.update();\n        }\n    }\n\n    class RangeSliderController {\n        constructor(doc, config) {\n            this.grabbing_ = null;\n            this.grabOffset_ = 0;\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.maxValue_ = config.maxValue;\n            this.minValue_ = config.minValue;\n            this.viewProps = config.viewProps;\n            this.value = config.value;\n            this.view = new RangeSliderView(doc, {\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: config.viewProps,\n            });\n            const ptHandler = new PointerHandler(this.view.trackElement);\n            ptHandler.emitter.on('down', this.onPointerDown_);\n            ptHandler.emitter.on('move', this.onPointerMove_);\n            ptHandler.emitter.on('up', this.onPointerUp_);\n        }\n        ofs_() {\n            if (this.grabbing_ === 'min') {\n                return this.view.knobElements[0].getBoundingClientRect().width / 2;\n            }\n            if (this.grabbing_ === 'max') {\n                return -this.view.knobElements[1].getBoundingClientRect().width / 2;\n            }\n            return 0;\n        }\n        valueFromData_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const p = (data.point.x + this.ofs_()) / data.bounds.width;\n            return mapRange(p, 0, 1, this.minValue_, this.maxValue_);\n        }\n        onPointerDown_(ev) {\n            if (!ev.data.point) {\n                return;\n            }\n            const p = ev.data.point.x / ev.data.bounds.width;\n            const v = this.value.rawValue;\n            const pmin = mapRange(v.min, this.minValue_, this.maxValue_, 0, 1);\n            const pmax = mapRange(v.max, this.minValue_, this.maxValue_, 0, 1);\n            if (Math.abs(pmax - p) <= 0.025) {\n                this.grabbing_ = 'max';\n            }\n            else if (Math.abs(pmin - p) <= 0.025) {\n                this.grabbing_ = 'min';\n            }\n            else if (p >= pmin && p <= pmax) {\n                this.grabbing_ = 'length';\n                this.grabOffset_ = mapRange(p - pmin, 0, 1, 0, this.maxValue_ - this.minValue_);\n            }\n            else if (p < pmin) {\n                this.grabbing_ = 'min';\n                this.onPointerMove_(ev);\n            }\n            else if (p > pmax) {\n                this.grabbing_ = 'max';\n                this.onPointerMove_(ev);\n            }\n        }\n        applyPointToValue_(data, opts) {\n            const v = this.valueFromData_(data);\n            if (v === null) {\n                return;\n            }\n            if (this.grabbing_ === 'min') {\n                this.value.setRawValue(new Interval(v, this.value.rawValue.max), opts);\n            }\n            else if (this.grabbing_ === 'max') {\n                this.value.setRawValue(new Interval(this.value.rawValue.min, v), opts);\n            }\n            else if (this.grabbing_ === 'length') {\n                const len = this.value.rawValue.length;\n                let min = v - this.grabOffset_;\n                let max = min + len;\n                if (min < this.minValue_) {\n                    min = this.minValue_;\n                    max = this.minValue_ + len;\n                }\n                else if (max > this.maxValue_) {\n                    min = this.maxValue_ - len;\n                    max = this.maxValue_;\n                }\n                this.value.setRawValue(new Interval(min, max), opts);\n            }\n        }\n        onPointerMove_(ev) {\n            this.applyPointToValue_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.applyPointToValue_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n            this.grabbing_ = null;\n        }\n    }\n\n    class RangeSliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sc_ = new RangeSliderController(doc, config);\n            const axis = {\n                baseStep: config.baseStep,\n                constraint: config.constraint,\n                textProps: ValueMap.fromObject({\n                    draggingScale: config.draggingScale,\n                    formatter: config.formatter,\n                }),\n            };\n            this.tc_ = new PointNdTextController(doc, {\n                assembly: IntervalAssembly,\n                axes: [axis, axis],\n                parser: config.parser,\n                value: this.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new RangeSliderTextView(doc, {\n                sliderView: this.sc_.view,\n                textView: this.tc_.view,\n            });\n        }\n        get textController() {\n            return this.tc_;\n        }\n    }\n\n    function intervalFromUnknown(value) {\n        return Interval.isObject(value)\n            ? new Interval(value.min, value.max)\n            : new Interval(0, 0);\n    }\n    function writeInterval(target, value) {\n        target.writeProperty('max', value.max);\n        target.writeProperty('min', value.min);\n    }\n\n    function createConstraint(params) {\n        const constraints = [];\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        return new IntervalConstraint(new CompositeConstraint(constraints));\n    }\n    const IntervalInputPlugin = {\n        id: 'input-interval',\n        type: 'input',\n        css: '.tp-cbzv_b,.tp-rslv_k,.tp-radv_b,.tp-cbzgv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-cbzv_b,.tp-rslv_k,.tp-radv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-cbzv_b:hover,.tp-rslv_k:hover,.tp-radv_b:hover{background-color:var(--btn-bg-h)}.tp-cbzv_b:focus,.tp-rslv_k:focus,.tp-radv_b:focus{background-color:var(--btn-bg-f)}.tp-cbzv_b:active,.tp-rslv_k:active,.tp-radv_b:active{background-color:var(--btn-bg-a)}.tp-cbzv_b:disabled,.tp-rslv_k:disabled,.tp-radv_b:disabled{opacity:0.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:0.5}.tp-btngridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:0.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:0.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--bld-us)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--bld-s);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-cbzpv_t{margin-top:var(--bld-s)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:0.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--bld-us) * 5);width:100%}.tp-cbzgv_u{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:transparent;stroke:var(--in-fg)}.tp-cbzgv_v{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:0.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity 0.2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:0.2em;opacity:0.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:0.5}.tp-rslv_t{height:calc(var(--bld-us));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:\\'\\';height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--bld-us) - 8px);margin-top:calc((var(--bld-us) - 8px) / -2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:0.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:0.5}.tp-radgridv{border-radius:var(--elm-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:0.5}.tp-radgridv .tp-radv_b{border-radius:0}',\n        accept: (exValue, params) => {\n            if (!Interval.isObject(exValue)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: new Interval(exValue.min, exValue.max),\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => intervalFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            equals: Interval.equals,\n            writer: (_args) => writeInterval,\n        },\n        controller(args) {\n            var _a;\n            const v = args.value;\n            const c = args.constraint;\n            if (!(c instanceof IntervalConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const midValue = (v.rawValue.min + v.rawValue.max) / 2;\n            const formatter = (_a = args.params.format) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c.edge, midValue));\n            const rc = c.edge && findConstraint(c.edge, RangeConstraint);\n            if ((rc === null || rc === void 0 ? void 0 : rc.minValue) !== undefined && (rc === null || rc === void 0 ? void 0 : rc.maxValue) !== undefined) {\n                return new RangeSliderTextController(args.document, {\n                    baseStep: getBaseStep(c.edge),\n                    constraint: c.edge,\n                    draggingScale: getSuitableDraggingScale(rc, midValue),\n                    formatter: formatter,\n                    maxValue: rc.maxValue,\n                    minValue: rc.minValue,\n                    parser: parseNumber,\n                    value: v,\n                    viewProps: args.viewProps,\n                });\n            }\n            const axis = {\n                baseStep: getBaseStep(c.edge),\n                constraint: c.edge,\n                textProps: ValueMap.fromObject({\n                    draggingScale: midValue,\n                    formatter: formatter,\n                }),\n            };\n            return new PointNdTextController(args.document, {\n                assembly: IntervalAssembly,\n                axes: [axis, axis],\n                parser: parseNumber,\n                value: v,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class RadioCellApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n    }\n\n    class TpRadioGridChangeEvent extends TpChangeEvent {\n        constructor(target, cell, index, value, presetKey) {\n            super(target, value, presetKey);\n            this.cell = cell;\n            this.index = index;\n        }\n    }\n\n    class RadioGridApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.cellToApiMap_ = new Map();\n            const gc = this.controller_.valueController;\n            gc.cellControllers.forEach((cc) => {\n                const api = new RadioCellApi(cc);\n                this.cellToApiMap_.set(cc, api);\n            });\n        }\n        get value() {\n            return this.controller_.value;\n        }\n        cell(x, y) {\n            const gc = this.controller_.valueController;\n            const cc = gc.cellControllers[y * gc.size[0] + x];\n            return this.cellToApiMap_.get(cc);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.controller_.value.emitter.on(eventName, (ev) => {\n                const gc = this.controller_.valueController;\n                const cc = gc.findCellByValue(ev.rawValue);\n                if (!cc) {\n                    return;\n                }\n                const capi = this.cellToApiMap_.get(cc);\n                if (!capi) {\n                    return;\n                }\n                const i = gc.cellControllers.indexOf(cc);\n                bh(new TpRadioGridChangeEvent(this, capi, [i % gc.size[0], Math.floor(i / gc.size[0])], ev.rawValue, undefined));\n            });\n        }\n    }\n\n    const className = ClassName('rad');\n    class RadioView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className('i'));\n            inputElem.name = config.name;\n            inputElem.type = 'radio';\n            config.viewProps.bindDisabled(inputElem);\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            const bodyElem = doc.createElement('div');\n            bodyElem.classList.add(className('b'));\n            labelElem.appendChild(bodyElem);\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className('t'));\n            bodyElem.appendChild(titleElem);\n            bindValueMap(config.props, 'title', (title) => {\n                titleElem.textContent = title;\n            });\n        }\n    }\n\n    class RadioController {\n        constructor(doc, config) {\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new RadioView(doc, {\n                name: config.name,\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class RadioGridController {\n        constructor(doc, config) {\n            this.cellCs_ = [];\n            this.cellValues_ = [];\n            this.onCellInputChange_ = this.onCellInputChange_.bind(this);\n            this.size = config.size;\n            const [w, h] = this.size;\n            for (let y = 0; y < h; y++) {\n                for (let x = 0; x < w; x++) {\n                    const bc = new RadioController(doc, {\n                        name: config.groupName,\n                        props: ValueMap.fromObject(Object.assign({}, config.cellConfig(x, y))),\n                        viewProps: ViewProps.create(),\n                    });\n                    this.cellCs_.push(bc);\n                    this.cellValues_.push(config.cellConfig(x, y).value);\n                }\n            }\n            this.value = config.value;\n            bindValue(this.value, (value) => {\n                const cc = this.findCellByValue(value);\n                if (!cc) {\n                    return;\n                }\n                cc.view.inputElement.checked = true;\n            });\n            this.viewProps = ViewProps.create();\n            this.view = new PlainView(doc, {\n                viewProps: this.viewProps,\n                viewName: 'radgrid',\n            });\n            this.view.element.style.gridTemplateColumns = `repeat(${w}, 1fr)`;\n            this.cellCs_.forEach((bc) => {\n                bc.view.inputElement.addEventListener('change', this.onCellInputChange_);\n                this.view.element.appendChild(bc.view.element);\n            });\n        }\n        get cellControllers() {\n            return this.cellCs_;\n        }\n        findCellByValue(value) {\n            const index = this.cellValues_.findIndex((v) => v === value);\n            if (index < 0) {\n                return null;\n            }\n            return this.cellCs_[index];\n        }\n        onCellInputChange_(ev) {\n            const inputElem = ev.currentTarget;\n            const index = this.cellCs_.findIndex((c) => c.view.inputElement === inputElem);\n            if (index < 0) {\n                return;\n            }\n            this.value.rawValue = this.cellValues_[index];\n        }\n    }\n\n    const RadioGridBladePlugin = (function () {\n        return {\n            id: 'radiogrid',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    cells: p.required.function,\n                    groupName: p.required.string,\n                    size: p.required.array(p.required.number),\n                    value: p.required.raw,\n                    view: p.required.constant('radiogrid'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: new RadioGridController(args.document, {\n                        groupName: args.params.groupName,\n                        cellConfig: args.params.cells,\n                        size: args.params.size,\n                        value: createValue(args.params.value),\n                    }),\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof RadioGridController)) {\n                    return null;\n                }\n                return new RadioGridApi(args.controller);\n            },\n        };\n    })();\n\n    const RadioGridNumberInputPlugin = {\n        id: 'input-radiogrid',\n        type: 'input',\n        accept(value, params) {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                cells: p.required.function,\n                groupName: p.required.string,\n                size: p.required.array(p.required.number),\n                view: p.required.constant('radiogrid'),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            return new RadioGridController(args.document, {\n                cellConfig: args.params.cells,\n                groupName: args.params.groupName,\n                size: args.params.size,\n                value: args.value,\n            });\n        },\n    };\n\n    const plugins = [\n        ButtonGridBladePlugin,\n        CubicBezierBladePlugin,\n        FpsGraphBladePlugin,\n        IntervalInputPlugin,\n        RadioGridBladePlugin,\n        RadioGridNumberInputPlugin,\n    ];\n\n    exports.CubicBezier = CubicBezier;\n    exports.plugins = plugins;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import { mat4, quat, vec3 } from 'gl-matrix';\n\nexport class OrbitControl {\n\n    velocity = [0, 0];\n\n    constructor(canvas, camera, updateCallback) {\n        this.pointerDown = false;\n        this.pointerDownPos = { x: 0, y: 0 };\n        this.pointerPos = { x: 0, y: 0 };\n        this.followPos = { x: 0, y: 0 };\n        this.prevFollowPos = {x: 0, y: 0};\n        this.phi = 0.;\n        this.theta = 0.;\n        this.camera = camera;\n        this.updateCallback = updateCallback;\n\n        canvas.style.touchAction = 'none';\n\n        canvas.addEventListener('pointerdown', e => {\n            this.pointerDownPos = { x: e.clientX, y: e.clientY }\n            this.followPos = { x: e.clientX, y: e.clientY }\n            this.pointerPos = { x: e.clientX, y: e.clientY }\n            this.prevFollowPos = { x: e.clientX, y: e.clientY }\n            this.pointerDownCameraUp = [...this.camera.up];\n            this.pointerDownRotation = [...this.camera.rotation];\n            this.pointerDown = true;\n        });\n        canvas.addEventListener('pointerup', e => {\n            this.pointerDown = false;\n        });\n        canvas.addEventListener('pointermove', e => {\n            if (this.pointerDown) {\n                this.pointerPos = { x: e.clientX, y: e.clientY }\n            }\n        });\n    }\n\n    update(deltaTime) {\n        const timeScale = 16 / (deltaTime + 0.01);\n\n        if (this.pointerDown) {\n            const damping = 10 * timeScale;\n            this.followPos.x += (this.pointerPos.x - this.followPos.x) / damping;\n            this.followPos.y += (this.pointerPos.y - this.followPos.y) / damping;\n\n            const delta = {\n                x: this.followPos.x - this.prevFollowPos.x,\n                y: this.followPos.y - this.prevFollowPos.y\n            };\n            this.prevFollowPos = { ...this.followPos };\n\n            const speed = 0.2 * timeScale;\n            this.phi = delta.x * speed;\n            this.theta = delta.y * speed;\n        } else {\n            const decc = 0.96 / Math.max(timeScale, 1);\n            this.phi *= decc;\n            this.theta *= decc;\n        }\n\n        const prevRotation = [...this.camera.rotation];\n\n        this.camera.rotation[0] -= this.theta;\n        this.camera.rotation[1] -= this.phi;\n\n        this.velocity[0] = this.camera.rotation[0] - prevRotation[0];\n        this.velocity[1] = this.camera.rotation[1] - prevRotation[1];\n\n        const thetaLimitUp = 80;\n        const thetaLimitDown = -80;\n        if (this.camera.rotation[0] > thetaLimitUp) {\n            this.camera.rotation[0] = thetaLimitUp;\n        } else if (this.camera.rotation[0] < thetaLimitDown) {\n            this.camera.rotation[0] = thetaLimitDown;\n        }\n\n        quat.fromEuler(this.camera.orbit, this.camera.rotation[0], this.camera.rotation[1], this.camera.rotation[2]);\n        vec3.transformQuat(this.camera.position, [0, 0, this.camera.distance], this.camera.orbit);\n\n        this.updateCallback();\n    }\n\n}","import { vec3 } from 'gl-matrix';\n\n// Credits: https://github.com/pailhead/three-rounded-box/blob/master/index.js\nexport class RoundedBoxGeometry {\n\n    constructor( \n        width, \n        height, \n        depth, \n        radius, \n        radiusSegments\n    ) {\n        //validate params ===================================\n    \n        radiusSegments = !isNaN( radiusSegments ) ? Math.max( 1, Math.floor( radiusSegments ) ) : 1 ;\n    \n        width =  !isNaN(width)  ? width  : 1;\n        height = !isNaN(height) ? height : 1;\n        depth =  !isNaN(depth)  ? depth  : 1;\n    \n        radius = !isNaN(radius) ? radius : .15;\n    \n        radius = Math.min( radius , Math.min( width , Math.min( height , Math.min( depth ) ) ) / 2 );\n    \n        const edgeHalfWidth =  width / 2 - radius;\n        const edgeHalfHeight = height / 2 - radius;\n        const edgeHalfDepth =  depth / 2 - radius;\n    \n        //calculate vertices count ==========================\n    \n        const rs1 =  radiusSegments + 1; //radius segments + 1 \n    \n        const totalVertexCount = ( rs1 * radiusSegments + 1 ) << 3; \n    \n    \n        //make buffers ======================================\n    \n        const positions = new Float32Array( totalVertexCount * 3 );\n        \n        const normals = new Float32Array( totalVertexCount * 3 );\n        \n    \n        //some vars =========================================\n    \n        let \n            cornerVerts = [], \n            cornerNormals = [],\n            normal = vec3.create(),\n            vertex = vec3.create(),\n            vertexPool = [],\n            normalPool = [],\n            indices = []\n        ;\n    \n        let\n            lastVertex = rs1 * radiusSegments,\n            cornerVertNumber = rs1 * radiusSegments + 1\n        ;\n    \n        //////////////////// VERTICES\n    \n        //corner offsets\n        let cornerLayout = [\n            vec3.fromValues(  1 ,  1 ,  1 ),\n            vec3.fromValues(  1 ,  1 , -1 ),\n            vec3.fromValues( -1 ,  1 , -1 ),\n            vec3.fromValues( -1 ,  1 ,  1 ),\n            vec3.fromValues(  1 , -1 ,  1 ),\n            vec3.fromValues(  1 , -1 , -1 ),\n            vec3.fromValues( -1 , -1 , -1 ),\n            vec3.fromValues( -1 , -1 ,  1 )\n        ];\n\n        //corner holder \n        for ( let j = 0 ; j < 8 ; j ++ ){\n\n            cornerVerts.push([]); \n            cornerNormals.push([]); \n\n        }\n\n        //construct 1/8 sphere ==============================\n\n        let PIhalf = Math.PI / 2;\n\n        let cornerOffset = vec3.fromValues( edgeHalfWidth , edgeHalfHeight , edgeHalfDepth );\n\n        for ( let y = 0; y <= radiusSegments; y ++ ) {\n\n            let v = y / radiusSegments;\n\n            let va = v * PIhalf; //arrange in 90 deg\n\n            let cosVa = Math.cos( va ); //scale of vertical angle \n\n            let sinVa = Math.sin( va );\n\n            if( y == radiusSegments ){\n\n                vec3.set(vertex, 0, 1, 0);\n\n                let vert = vec3.clone(vertex);\n                vec3.scale(vert, vert, radius);\n                vec3.add(vert, vert, cornerOffset);\n                \n                cornerVerts[0].push( vert );\n\n                vertexPool.push( vert );\n                \n                let norm = vec3.normalize(vec3.create(), vertex);\n\n                cornerNormals[0].push( norm );\n\n                normalPool.push( norm );\n\n                continue; //skip row loop\n            \n            } \t\n\n            for ( let x = 0; x <= radiusSegments; x ++ ) {\n\n                let u = x / radiusSegments;\n\n                let ha = u * PIhalf;\n\n                //make 1/8 sphere points\n                vertex[0] = cosVa * Math.cos( ha );\n                vertex[1] = sinVa;\n                vertex[2] = cosVa * Math.sin( ha );\n\n                //copy sphere point, scale by radius, offset by half whd\n                let vert = vec3.clone(vertex);\n                vec3.scale(vert, vert, radius);\n                vec3.add(vert, vert, cornerOffset);\n\n                cornerVerts[0].push( vert );\n\n                vertexPool.push( vert );\n                \n                //sphere already normalized, just clone\n\n                let norm = vec3.normalize(vec3.create(), vec3.clone(vertex));\n\n                cornerNormals[0].push( norm );\n                normalPool.push( norm );\n\n            }\n\n        }\n\n        //distribute corner verts ===========================\n\n        for ( let i = 1 ; i < 8 ; i ++ ){\n\n            for( let j = 0 ; j < cornerVerts[0].length ; j ++ ){\n\n                let vert = vec3.multiply(vec3.create(), cornerVerts[0][j], cornerLayout[i]);\n\n                cornerVerts[i].push( vert );\n                \n                vertexPool.push( vert );\n\n                let norm = vec3.multiply(vec3.create(), cornerNormals[0][j], cornerLayout[i]);\n\n                cornerNormals[i].push( norm );\n\n                normalPool.push( norm );\n\n            }\n\n        }\t\n\n        //////////////////// FACES\n\n        //top\n        let a = lastVertex;// + cornerVertNumber * 0;\n        let b = lastVertex + cornerVertNumber;// * 1;\n        let c = lastVertex + cornerVertNumber * 2;\n        let d = lastVertex + cornerVertNumber * 3;\n\n        indices.push( a );\n        indices.push( b );\n        indices.push( c );\n        indices.push( a );\n        indices.push( c );\n        indices.push( d );\n\n        //bottom\n        a = lastVertex + cornerVertNumber * 4;// + cornerVertNumber * 0;\n        b = lastVertex + cornerVertNumber * 5;// * 1;\n        c = lastVertex + cornerVertNumber * 6;\n        d = lastVertex + cornerVertNumber * 7;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( a );\n        indices.push( d );\n        indices.push( c );\n\n        //left \n        a = 0;\n        b = cornerVertNumber;\n        c = cornerVertNumber * 4;\n        d = cornerVertNumber * 5;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( b );\n        indices.push( c );\n        indices.push( d );\n\n        //right \n        a = cornerVertNumber * 2;\n        b = cornerVertNumber * 3;\n        c = cornerVertNumber * 6;\n        d = cornerVertNumber * 7;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( b );\n        indices.push( c );\n        indices.push( d );\n\n        //front \n        a = radiusSegments;\n        b = radiusSegments + cornerVertNumber * 3;\n        c = radiusSegments + cornerVertNumber * 4;\n        d = radiusSegments + cornerVertNumber * 7;\n\n        indices.push( a );\n        indices.push( b );\n        indices.push( c );\n        indices.push( b );\n        indices.push( d );\n        indices.push( c );\n\n        //back \n        a = radiusSegments + cornerVertNumber;\n        b = radiusSegments + cornerVertNumber * 2;\n        c = radiusSegments + cornerVertNumber * 5;\n        d = radiusSegments + cornerVertNumber * 6;\n\n        indices.push( a );\n        indices.push( c );\n        indices.push( b );\n        indices.push( b );\n        indices.push( c );\n        indices.push( d );\n    \n        //////////////////// CORNERS\n        \n        let indexInd = 0;\n\n\n        let flips = [\n            true,\n            false,\n            true,\n            false,\n            false,\n            true,\n            false,\n            true\n        ];\n\n        let lastRowOffset = rs1 * ( radiusSegments - 1 );\n\n        for ( let i = 0 ; i < 8 ; i ++ ){\n\n            let cornerOffset = cornerVertNumber * i;\n\n            for ( let v = 0 ; v < radiusSegments - 1 ; v ++ ){\n\n                let r1 = v * rs1; \t\t//row offset\n                let r2 = (v + 1) * rs1; //next row\n\n                for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                    let u1 = u + 1;\n                    let a = cornerOffset + r1 + u;\n                    let b = cornerOffset + r1 + u1;\n                    let c = cornerOffset + r2 + u;\n                    let d = cornerOffset + r2 + u1;\n\n                    if( !flips[i] ){\n\n                        indices.push( a );\n                        indices.push( b );\n                        indices.push( c );\n\n                        indices.push( b );\n                        indices.push( d );\n                        indices.push( c );\n\n                    } else {\n\n                        indices.push( a );\n                        indices.push( c );\n                        indices.push( b );\n\n                        indices.push( b );\n                        indices.push( c );\n                        indices.push( d );\n\n                    }\n\n                }\n\n            }\n            \n            for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                let a = cornerOffset + lastRowOffset + u;\n                let b = cornerOffset + lastRowOffset + u + 1;\n                let c = cornerOffset + lastVertex;\n\n                if( !flips[i] ){\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n\n                } else {\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n\n                }\n\n            }\n\n        }\n    \n        //////////////////// HEIGHT EDGES\n\n        for ( let i = 0 ; i < 4 ; i ++ ){\n\n            let cOffset = i * cornerVertNumber;\n            let cRowOffset = 4 * cornerVertNumber + cOffset;\n            let needsFlip = i & 1 === 1;\n            for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                let u1 = u + 1;\n                let a = cOffset + u;\n                let b = cOffset + u1;\n                let c = cRowOffset + u;\n                let d = cRowOffset + u1;\n\n                if( !needsFlip ){\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( d );\n                    indices.push( c );\n\n                } else {\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( d );\n\n                }\n\n            }\n\n        }\n\n        //////////////////// WIDTH EDGES\n\n        let end = radiusSegments - 1;\n\n        let cStartsW = [ 0 , 1 , 4 , 5 ];\n        let cEndsW =   [ 3 , 2 , 7 , 6 ];\n        let needsFlip = [0,1,1,0];\n\n        for ( let i = 0 ; i < 4 ; i ++ ){\n\n            let cStart = cStartsW[i] * cornerVertNumber;\n            let cEnd = cEndsW[i] * cornerVertNumber;\n            \n\n            for ( let u = 0 ; u <= end ; u ++ ){\n\n                // let dInd = u != end ? radiusSegments + u * rs1 : cornerVertNumber - 1;\n\n                let a = cStart + radiusSegments + u * rs1;\n                let b = cStart + (u != end ? radiusSegments + (u + 1) * rs1 : cornerVertNumber - 1);\n\n                let c = cEnd + radiusSegments + u * rs1;\n                let d = cEnd + (u != end ? radiusSegments + (u + 1) * rs1 : cornerVertNumber - 1);\n\n                if( !needsFlip[i] ){\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( d );\n                    indices.push( c );\n\n                } \n                else {\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( d );\n\n                }\n\n            }\n\n        }\n\n        //////////////////// DEPTH EDGES\n\n        let cStartsD = [ 0 , 2 , 4 , 6 ];\n        let cEndsD =   [ 1 , 3 , 5 , 7 ];\n            \n        for ( let i = 0 ; i < 4 ; i ++ ){\n\n            let cStartD = cornerVertNumber * cStartsD[ i ];\n            let cEndD =   cornerVertNumber * cEndsD[ i ];\n\n            let needsFlip = 1 >= i;\n\n            for ( let u = 0 ; u < radiusSegments ; u ++ ){\n\n                let urs1 =  u * rs1;\n                let u1rs1 = (u+1) * rs1;\n\n                let a = cStartD + urs1;\n                let b = cStartD + u1rs1;\n                let c = cEndD + urs1;\n                let d = cEndD + u1rs1\n\n                if( needsFlip ){\n\n                    indices.push( a );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( d );\n\n                } else {\n\n                    indices.push( a );\n                    indices.push( b );\n                    indices.push( c );\n                    indices.push( b );\n                    indices.push( d );\n                    indices.push( c );\n\n                }\n\n            }\n\n        }\n    \n        //fill buffers ======================================\n    \n        let index = 0;\n    \n        for ( let i = 0 ; i < vertexPool.length ; i ++ ){\n    \n            positions.set(vertexPool[i], index * 3);\n    \n            normals.set(normalPool[i], index * 3);\n    \n            index++;\n    \n        }\n    \n        this.vertices = positions;\n        this.normals = normals;\n        this.indices = indices;\n        this.count = indices.length;\n        \n    };\n}","import { mat4, quat, vec3 } from 'gl-matrix';\nimport { OrbitControl } from './orbit-control';\nimport { RoundedBoxGeometry } from './rounded-box-geometry';\n\nimport colorVertShaderSource from './shader/color.vert';\nimport colorFragShaderSource from './shader/color.frag';\nimport ssaoVertShaderSource from './shader/ssao.vert';\nimport ssaoFragShaderSource from './shader/ssao.frag';\nimport horizontalBlurVertShaderSource from './shader/bilateral-gaussian-blur-horizontal.vert';\nimport horizontalBlurFragShaderSource from './shader/bilateral-gaussian-blur-horizontal.frag';\nimport verticalBlurVertShaderSource from './shader/bilateral-gaussian-blur-vertical.vert';\nimport verticalBlurFragShaderSource from './shader/bilateral-gaussian-blur-vertical.frag';\nimport compositeVertShaderSource from './shader/composite.vert';\nimport compositeFragShaderSource from './shader/composite.frag';\n\nexport class SSAODemo {\n    oninit;\n\n    #time = 0;\n    #frames = 0;\n    #deltaTime = 0;\n    #isDestroyed = false;\n\n    SSAO_SCALE = .5;\n\n    PASS_COMPOSITE = 0;\n    PASS_SSAO = 1;\n    PASS_COLOR = 2;\n\n    passIndex = this.PASS_COMPOSITE;\n    passLabels = [\n        'composite',\n        'ssao',\n        'color'\n    ];\n\n    camera = {\n        matrix: mat4.create(),\n        near: 80,\n        far: 150,\n        distance: 120,\n        orbit: quat.create(),\n        position: vec3.create(),\n        rotation: vec3.create(),\n        up: vec3.fromValues(0, 1, 0)\n    };\n\n    ssao = {\n        bias: 0.05,\n        maxKernelRadius: 50.,\n        blurScale: 1.5,\n        attenuationScale: 0.16,\n        enableBlur: true\n    }\n\n    acc = 0;\n\n    constructor(canvas, pane, oninit = null) {\n        this.canvas = canvas;\n        this.pane = pane;\n        this.oninit = oninit;\n\n        this.#init();\n    }\n\n    resize() {\n        const gl = this.gl;\n\n        this.#resizeCanvasToDisplaySize(gl.canvas);\n        \n        // When you need to set the viewport to match the size of the canvas's\n        // drawingBuffer this will always be correct\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        // resize the framebuffer textures\n        this.#resizeTextures(gl);\n\n        this.#updateProjectionMatrix(gl);\n    }\n\n    run(time = 0) {+\n        this.fpsGraph.begin();\n\n        this.#deltaTime = time - this.#time;\n        this.#time = time;\n        this.#frames += this.#deltaTime / 16;\n\n        if (this.#isDestroyed) return;\n\n        this.control.update(this.#deltaTime);\n\n        this.#render();\n\n        this.fpsGraph.end();\n\n        requestAnimationFrame((t) => this.run(t));\n    }\n\n    #render() {\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        gl.enable(gl.DEPTH_TEST);\n        gl.enable(gl.CULL_FACE);\n\n        // color/detph/normals pass\n        this.#setFramebuffer(gl, this.colorFramebuffer, this.colorFBOWidth, this.colorFBOHeight);\n        gl.useProgram(this.colorProgram);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.clearColor(.97, .97, 0.97, 0.);\n        gl.uniformMatrix4fv(this.colorLocations.u_viewMatrix, false, this.colorUniforms.u_viewMatrix);\n        gl.uniformMatrix4fv(this.colorLocations.u_projectionMatrix, false, this.colorUniforms.u_projectionMatrix);\n        gl.uniform3f(this.colorLocations.u_cameraPosition, this.camera.position[0], this.camera.position[1], this.camera.position[2]);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.envMapTexture);\n        gl.uniform1i(this.colorLocations.u_envMap, 0);\n        //gl.uniform1f(this.colorLocations.u_frames, this.#frames);\n        const s1 = (Math.sin(this.#frames * 0.08) * 0.5 + .5) * 0.5;\n        const s2 = (Math.cos(this.#frames * 0.06) * 0.5 + .5) * 0.3;\n        const s3 = (Math.sin(this.#frames * 0.02) * 0.5 + .5) * 0.4;\n        const v = Math.min(Math.abs(this.control.velocity[1]) / 6, 1);\n        this.acc += (v - this.acc) / 3;\n        this.#renderCube(gl, this.cube1VAO, this.cube1Buffers.numElem, [1., 0.15, 0.15], [0, 0, 0], [25 - s1 * 5, 25 - s2 * 5, 25 - s3 * 5], [0, 1, 0.1], Math.PI / 4);\n        this.#renderCube(gl, this.cube2VAO, this.cube2Buffers.numElem, [.95, .8, 0.2], [10 * this.acc, 25 - 1.5, 0], [20, 20 - s1 * 3, 20 - s2 * 2], [0, 1, 0], 0);\n        this.#renderCube(gl, this.cube3VAO, this.cube3Buffers.numElem, [.2, .4, 1], [-22 - 5. * this.acc, 2, 10], [18, 18 - s2 * 4, 18 - s1 * 2], [0.1, 1, 0],  3 * Math.PI / 4.5);\n        this.#renderCube(gl, this.cube3VAO, this.cube3Buffers.numElem, [.2, .95, .4], [19 + 5 * this.acc, -12, 13], [12 - s1 * 3, 12, 12 - s2 * 1], [0, 1, 0],  0);\n        this.#renderCube(gl, this.cube2VAO, this.cube2Buffers.numElem, [.8, 0.8, 0.8], [5 *  this.acc, -20, -15], [15 - s2 * 2, 15, 15 - s1 * 3], [0, 1, 0.3], Math.PI / 3);\n        this.#setFramebuffer(gl, null, this.colorFBOWidth, this.colorFBOHeight);\n\n        // ssao pass\n        this.#setFramebuffer(gl, this.ssaoFramebuffer, this.ssaoFBOWidth, this.ssaoFBOHeight);\n        gl.useProgram(this.ssaoProgram);\n        gl.clearColor(1, 1, 1, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.bindVertexArray(this.quadVAO);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.uniform1i(this.ssaoLocations.u_depthTexture, 0);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, this.normalTexture);\n        gl.uniform1i(this.ssaoLocations.u_normalTexture, 1);\n        gl.activeTexture(gl.TEXTURE2);\n        gl.bindTexture(gl.TEXTURE_2D, this.noiseTexture);\n        gl.uniform1i(this.ssaoLocations.u_noiseTexture, 2);\n        gl.activeTexture(gl.TEXTURE3);\n        gl.bindTexture(gl.TEXTURE_2D, this.positionTexture);\n        gl.uniform1i(this.ssaoLocations.u_positionTexture, 3);\n        gl.uniform1f(this.ssaoLocations.u_bias, this.ssao.bias);\n        gl.uniform1f(this.ssaoLocations.u_maxKernelRadius, this.ssao.maxKernelRadius);\n        gl.uniform1f(this.ssaoLocations.u_attentuationScale, this.ssao.attenuationScale);\n        gl.uniform1f(this.ssaoLocations.u_scale, this.SSAO_SCALE);\n        gl.uniform1f(this.ssaoLocations.u_near, this.camera.near);\n        gl.uniform1f(this.ssaoLocations.u_far, this.camera.far);\n        //gl.uniform1f(this.ssaoLocations.u_frames, this.#frames);\n        //gl.uniformMatrix4fv(this.ssaoLocations.u_inversProjectionMatrix, false, mat4.invert(mat4.create(), this.colorUniforms.u_projectionMatrix));\n        gl.drawArrays(gl.TRIANGLES, 0, this.quadBuffers.numElem);\n        this.#setFramebuffer(gl, null, this.colorFBOWidth, this.colorFBOHeight);\n\n        // horizontal blur pass\n        this.#setFramebuffer(gl, this.horizontalBlurFramebuffer, this.ssaoFBOWidth, this.ssaoFBOHeight);\n        gl.useProgram(this.horizontalBlurProgram);\n        gl.clearColor(1, 1, 1, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.bindVertexArray(this.quadVAO);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.uniform1i(this.horizontalBlurLocations.u_depthTexture, 0);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, this.ssaoTexture);\n        gl.uniform1i(this.horizontalBlurLocations.u_colorTexture, 1);\n        gl.uniform1f(this.horizontalBlurLocations.u_scale, this.ssao.blurScale);\n        gl.drawArrays(gl.TRIANGLES, 0, this.quadBuffers.numElem);\n        this.#setFramebuffer(gl, null, this.colorFBOWidth, this.colorFBOHeight);\n\n        // vertical blur pass\n        this.#setFramebuffer(gl, this.verticalBlurFramebuffer, this.ssaoFBOWidth, this.ssaoFBOHeight);\n        gl.useProgram(this.verticalBlurProgram);\n        gl.clearColor(1, 1, 1, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.bindVertexArray(this.quadVAO);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.uniform1i(this.verticalBlurLocations.u_depthTexture, 0);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, this.horizontalBlurTexture);\n        gl.uniform1i(this.verticalBlurLocations.u_colorTexture, 1);\n        gl.uniform1f(this.verticalBlurLocations.u_scale, this.ssao.blurScale);\n        gl.drawArrays(gl.TRIANGLES, 0, this.quadBuffers.numElem);\n        this.#setFramebuffer(gl, null, this.colorFBOWidth, this.colorFBOHeight);\n\n        gl.useProgram(this.compositeProgram);\n        gl.clearColor(1, 1, 1, 1);\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.bindVertexArray(this.quadVAO);\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this.colorTexture);\n        gl.uniform1i(this.compositeLocations.u_colorTexture, 0);\n        gl.activeTexture(gl.TEXTURE1);\n        gl.bindTexture(gl.TEXTURE_2D, this.ssao.enableBlur ? this.verticalBlurTexture : this.ssaoTexture);\n        gl.uniform1i(this.compositeLocations.u_ssaoTexture, 1);\n        gl.uniform1i(this.compositeLocations.u_passIndex, this.passIndex);\n        gl.drawArrays(gl.TRIANGLES, 0, this.quadBuffers.numElem);\n    }\n\n    #renderCube(gl, vao, numElm, color, translation, scale, rotationAxis, angle) {\n        const worldMatrix = mat4.create();\n        mat4.translate(worldMatrix, worldMatrix, translation);\n        mat4.rotate(worldMatrix, worldMatrix, angle, rotationAxis);\n        mat4.scale(worldMatrix, worldMatrix, scale);\n\n        const worldInverseTransposeMatrix = mat4.create();\n        mat4.invert(worldInverseTransposeMatrix, worldMatrix);\n        mat4.transpose(worldInverseTransposeMatrix, worldInverseTransposeMatrix);\n\n        gl.uniformMatrix4fv(this.colorLocations.u_worldMatrix, false, worldMatrix);\n        gl.uniformMatrix4fv(this.colorLocations.u_worldInverseTransposeMatrix, false, worldInverseTransposeMatrix);\n        gl.uniform3f(this.colorLocations.u_color, color[0], color[1], color[2]);\n        gl.bindVertexArray(vao);\n        gl.drawElements(gl.TRIANGLES, numElm, gl.UNSIGNED_SHORT, 0);\n    }\n\n    destroy() {\n        this.#isDestroyed = true;\n    }\n\n    #init() {\n        this.gl = this.canvas.getContext('webgl2', { antialias: false, alpha: false });\n\n        /** @type {WebGLRenderingContext} */\n        const gl = this.gl;\n\n        if (!gl) {\n            throw new Error('No WebGL 2 context!')\n        }\n\n        if (!gl.getExtension(\"EXT_color_buffer_float\")) {\n            console.error(\"FLOAT color buffer not available\");\n            document.body.innerHTML = \"This example requires EXT_color_buffer_float which is unavailable on this system.\"\n        }\n\n        ///////////////////////////////////  PROGRAM SETUP\n\n        // setup programs\n        this.colorProgram = this.#createProgram(gl, [colorVertShaderSource, colorFragShaderSource], null, { a_position: 0, a_normal: 1, a_uv: 2 });\n        this.compositeProgram = this.#createProgram(gl, [compositeVertShaderSource, compositeFragShaderSource], null, { a_position: 0 });\n        this.ssaoProgram = this.#createProgram(gl, [ssaoVertShaderSource, ssaoFragShaderSource], null, { a_position: 0 });\n        this.horizontalBlurProgram = this.#createProgram(gl, [horizontalBlurVertShaderSource, horizontalBlurFragShaderSource], null, { a_position: 0 });\n        this.verticalBlurProgram = this.#createProgram(gl, [verticalBlurVertShaderSource, verticalBlurFragShaderSource], null, { a_position: 0 });\n\n        // find the locations\n        this.colorLocations = {\n            a_position: gl.getAttribLocation(this.colorProgram, 'a_position'),\n            a_normal: gl.getAttribLocation(this.colorProgram, 'a_normal'),\n            a_uv: gl.getAttribLocation(this.colorProgram, 'a_uv'),\n            u_worldMatrix: gl.getUniformLocation(this.colorProgram, 'u_worldMatrix'),\n            u_viewMatrix: gl.getUniformLocation(this.colorProgram, 'u_viewMatrix'),\n            u_projectionMatrix: gl.getUniformLocation(this.colorProgram, 'u_projectionMatrix'),\n            u_worldInverseTransposeMatrix: gl.getUniformLocation(this.colorProgram, 'u_worldInverseTransposeMatrix'),\n            u_cameraPosition: gl.getUniformLocation(this.colorProgram, 'u_cameraPosition'),\n            u_envMap: gl.getUniformLocation(this.colorProgram, 'u_envMap'),\n            u_color: gl.getUniformLocation(this.colorProgram, 'u_color')\n           //u_frames: gl.getUniformLocation(this.colorProgram, 'u_frames')\n        };\n        this.compositeLocations = {\n            a_position: gl.getAttribLocation(this.compositeProgram, 'a_position'),\n            u_colorTexture: gl.getUniformLocation(this.compositeProgram, 'u_colorTexture'),\n            u_ssaoTexture: gl.getUniformLocation(this.compositeProgram, 'u_ssaoTexture'),\n            u_passIndex: gl.getUniformLocation(this.compositeProgram, 'u_passIndex')\n        };\n        this.ssaoLocations = {\n            a_position: gl.getAttribLocation(this.ssaoProgram, 'a_position'),\n            u_depthTexture: gl.getUniformLocation(this.ssaoProgram, 'u_depthTexture'),\n            u_normalTexture: gl.getUniformLocation(this.ssaoProgram, 'u_normalTexture'),\n            u_positionTexture: gl.getUniformLocation(this.ssaoProgram, 'u_positionTexture'),\n            u_noiseTexture: gl.getUniformLocation(this.ssaoProgram, 'u_noiseTexture'),\n            u_bias: gl.getUniformLocation(this.ssaoProgram, 'u_bias'),\n            u_maxKernelRadius: gl.getUniformLocation(this.ssaoProgram, 'u_maxKernelRadius'),\n            u_near: gl.getUniformLocation(this.ssaoProgram, 'u_near'),\n            u_far: gl.getUniformLocation(this.ssaoProgram, 'u_far'),\n            u_scale: gl.getUniformLocation(this.ssaoProgram, 'u_scale'),\n            u_attentuationScale: gl.getUniformLocation(this.ssaoProgram, 'u_attentuationScale'),\n            //u_frames: gl.getUniformLocation(this.ssaoProgram, 'u_frames')\n            //u_inversProjectionMatrix: gl.getUniformLocation(this.ssaoProgram, 'u_inversProjectionMatrix')\n        };\n        this.horizontalBlurLocations = {\n            a_position: gl.getAttribLocation(this.horizontalBlurProgram, 'a_position'),\n            u_depthTexture: gl.getUniformLocation(this.horizontalBlurProgram, 'u_depthTexture'),\n            u_colorTexture: gl.getUniformLocation(this.horizontalBlurProgram, 'u_colorTexture'),\n            u_scale: gl.getUniformLocation(this.horizontalBlurProgram, 'u_scale')\n        };\n        this.verticalBlurLocations = {\n            a_position: gl.getAttribLocation(this.verticalBlurProgram, 'a_position'),\n            u_depthTexture: gl.getUniformLocation(this.verticalBlurProgram, 'u_depthTexture'),\n            u_colorTexture: gl.getUniformLocation(this.verticalBlurProgram, 'u_colorTexture'),\n            u_scale: gl.getUniformLocation(this.verticalBlurProgram, 'u_scale')\n        };\n        \n        // setup uniforms\n        this.colorUniforms = {\n            u_worldMatrix: mat4.create(),\n            u_viewMatrix: mat4.create(),\n            u_projectionMatrix: mat4.create(),\n            u_worldInverseTransposeMatrix: mat4.create()\n        };\n        mat4.rotate(this.colorUniforms.u_worldMatrix, this.colorUniforms.u_worldMatrix, -Math.PI / 2, [1, 0, 0]);\n        mat4.scale(this.colorUniforms.u_worldMatrix, this.colorUniforms.u_worldMatrix, [4, 4, 4]);\n        mat4.translate(this.colorUniforms.u_worldMatrix, this.colorUniforms.u_worldMatrix, [0, 0, 0]);\n\n        /////////////////////////////////// GEOMETRY / MESH SETUP\n\n        // create object VAOs\n        this.cube1Geometry = new RoundedBoxGeometry(1, 1, 1, .05, 4);\n        this.cube1Buffers = { \n            position: this.#createBuffer(gl, this.cube1Geometry.vertices),\n            normal: this.#createBuffer(gl, this.cube1Geometry.normals),\n            numElem: this.cube1Geometry.count\n        };\n        this.cube1VAO = this.#makeVertexArray(gl, [\n            [this.cube1Buffers.position, this.colorLocations.a_position, 3],\n            [this.cube1Buffers.normal, this.colorLocations.a_normal, 3]\n        ], this.cube1Geometry.indices);\n\n        this.cube2Geometry = new RoundedBoxGeometry(1, 1, 1, 0.3, 5);\n        this.cube2Buffers = { \n            position: this.#createBuffer(gl, this.cube2Geometry.vertices),\n            normal: this.#createBuffer(gl, this.cube2Geometry.normals),\n            numElem: this.cube2Geometry.count\n        };\n        this.cube2VAO = this.#makeVertexArray(gl, [\n            [this.cube2Buffers.position, this.colorLocations.a_position, 3],\n            [this.cube2Buffers.normal, this.colorLocations.a_normal, 3]\n        ], this.cube2Geometry.indices);\n\n        this.cube3Geometry = new RoundedBoxGeometry(2, 1, 1, .5, 12);\n        this.cube3Buffers = { \n            position: this.#createBuffer(gl, this.cube3Geometry.vertices),\n            normal: this.#createBuffer(gl, this.cube3Geometry.normals),\n            numElem: this.cube3Geometry.count\n        };\n        this.cube3VAO = this.#makeVertexArray(gl, [\n            [this.cube3Buffers.position, this.colorLocations.a_position, 3],\n            [this.cube3Buffers.normal, this.colorLocations.a_normal, 3]\n        ], this.cube3Geometry.indices);\n\n        // create quad VAO\n        const quadPositions = [\n            -1, -1,\n            3, -1,\n            -1, 3\n        ];\n        this.quadBuffers = {\n            position: this.#createBuffer(gl, quadPositions),\n            numElem: quadPositions.length / 2\n        };\n        this.quadVAO = this.#makeVertexArray(gl, [[this.quadBuffers.position, this.colorLocations.a_position, 2]]);\n\n\n        // initial client dimensions\n        const clientWidth = gl.canvas.clientWidth;\n        const clientHeight = gl.canvas.clientHeight;\n         \n        /////////////////////////////////// INITIAL DRAW PASS SETUP\n\n        this.colorFBOWidth = clientWidth;\n        this.colorFBOHeight = clientHeight;\n\n        // depth texture setup\n        this.depthTexture = this.#createAndSetupTexture(gl, gl.NEAREST, gl.NEAREST);\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.DEPTH_COMPONENT32F, this.colorFBOWidth, this.colorFBOHeight, 0, gl.DEPTH_COMPONENT, gl.FLOAT, null);\n        // color texture setup\n        this.colorTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.colorTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.colorFBOWidth, this.colorFBOHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        // normal texture setup\n        this.normalTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.normalTexture);\n        gl.texStorage2D(gl.TEXTURE_2D, 1, gl.RGBA16F, this.colorFBOWidth, this.colorFBOHeight);\n        // position texture setup\n        this.positionTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.positionTexture);\n        gl.texStorage2D(gl.TEXTURE_2D, 1, gl.RGBA16F, this.colorFBOWidth, this.colorFBOHeight);\n\n        this.colorFramebuffer = this.#createFramebuffer(gl, [this.colorTexture, this.normalTexture, this.positionTexture], this.depthTexture);\n\n        /////////////////////////////////// SSAO PASS SETUP\n\n        this.ssaoFBOWidth = this.colorFBOWidth * this.SSAO_SCALE;\n        this.ssaoFBOHeight = this.colorFBOHeight * this.SSAO_SCALE;\n\n        this.ssaoTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.ssaoTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.R8, this.ssaoFBOWidth, this.ssaoFBOHeight, 0, gl.RED, gl.UNSIGNED_BYTE, null);\n        this.ssaoFramebuffer = this.#createFramebuffer(gl, [this.ssaoTexture]);\n\n        /////////////////////////////////// SSAO BLUR PASSES SETUP\n\n        this.horizontalBlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.horizontalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.ssaoFBOWidth, this.ssaoFBOHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.horizontalBlurFramebuffer = this.#createFramebuffer(gl, [this.horizontalBlurTexture]);\n\n        this.verticalBlurTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.verticalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.ssaoFBOWidth, this.ssaoFBOHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        this.verticalBlurFramebuffer = this.#createFramebuffer(gl, [this.verticalBlurTexture]);\n\n\n        // create noise texture\n        const noiseTextureSize = clientWidth * clientHeight;\n        const noiseTextureData = new Float32Array(noiseTextureSize * 2);\n        for (let i = 0; i < noiseTextureSize; ++i) {\n            const ndx = i * 2;\n            noiseTextureData[ndx]     = Math.random() * 2.0 - 1.0;\n            noiseTextureData[ndx + 1] = Math.random() * 2.0 - 1.0;\n        }    \n        this.noiseTexture = this.#createAndSetupTexture(gl, gl.NEAREST, gl.NEAREST);\n        gl.bindTexture(gl.TEXTURE_2D, this.noiseTexture);\n        gl.texStorage2D(gl.TEXTURE_2D, 1, gl.RG16F, clientWidth, clientHeight);\n        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, clientWidth, clientHeight, gl.RG, gl.FLOAT, noiseTextureData);\n    \n\n        this.resize();\n\n        this.#initEnvMap();\n        this.#updateCameraMatrix();\n        this.#updateProjectionMatrix(gl);\n\n        this.#initOrbitControls();\n        this.#initTweakpane();\n\n        if (this.oninit) this.oninit(this);\n    }\n\n    #initEnvMap() {\n        const gl = this.gl;\n\n        this.envMapTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.envMapTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 100, 500, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        const img = new Image();\n        img.src = new URL('./assets/studio024.jpg', import.meta.url);\n        img.addEventListener('load', () => {\n            gl.bindTexture(gl.TEXTURE_2D, this.envMapTexture);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 100, 500, 0, gl.RGBA, gl.UNSIGNED_BYTE, img);\n        });\n    }\n\n    #createBuffer(gl, data) {\n        const buffer = this.gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        return buffer;\n    }\n\n    #initOrbitControls() {\n        this.control = new OrbitControl(this.canvas, this.camera, () => this.#updateCameraMatrix());\n    }\n\n    #createFramebuffer(gl, colorAttachements, depthAttachement) {\n        const fbo = gl.createFramebuffer();\n        const drawBuffers = [];\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n        colorAttachements.forEach((texture, ndx) => {\n            const attachmentPoint = gl[`COLOR_ATTACHMENT${ndx}`];\n            gl.framebufferTexture2D(\n                gl.FRAMEBUFFER,\n                attachmentPoint,\n                gl.TEXTURE_2D, \n                texture,\n                0);\n            drawBuffers.push(attachmentPoint);\n        });\n        if (depthAttachement) {\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.TEXTURE_2D, depthAttachement, 0);\n        }\n        gl.drawBuffers(drawBuffers);\n\n        if(gl.checkFramebufferStatus(gl.FRAMEBUFFER) != gl.FRAMEBUFFER_COMPLETE) {\n            console.error('could not complete render framebuffer setup', gl.checkFramebufferStatus(gl.FRAMEBUFFER))\n        }\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        return fbo;\n    }\n\n    #makeVertexArray(gl, bufLocNumElmPairs, indices) {\n        const va = gl.createVertexArray();\n        gl.bindVertexArray(va);\n        for (const [buffer, loc, numElem] of bufLocNumElmPairs) {\n            if(loc == -1) continue;\n\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            gl.enableVertexAttribArray(loc);\n            gl.vertexAttribPointer(\n                loc,      // attribute location\n                numElem,        // number of elements\n                gl.FLOAT, // type of data\n                false,    // normalize\n                0,        // stride (0 = auto)\n                0,        // offset\n            );\n        }\n        if (indices) {\n            const indexBuffer = gl.createBuffer();\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\n        }\n        gl.bindVertexArray(null);\n        return va;\n    }\n\n    #createShader(gl, type, source) {\n        const shader = gl.createShader(type);\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n        if (success) {\n            return shader;\n        }\n\n        console.error(gl.getShaderInfoLog(shader));\n        gl.deleteShader(shader);\n    }\n\n    #createProgram(gl, shaderSources, transformFeedbackVaryings, attribLocations) {\n        const program = gl.createProgram();\n\n        [gl.VERTEX_SHADER, gl.FRAGMENT_SHADER].forEach((type, ndx) => {\n            const shader = this.#createShader(gl, type, shaderSources[ndx]);\n            gl.attachShader(program, shader);\n        });\n\n        if (transformFeedbackVaryings) {\n            gl.transformFeedbackVaryings(program, transformFeedbackVaryings, gl.SEPARATE_ATTRIBS);\n        }\n\n        if (attribLocations) {\n            for(const attrib in attribLocations) {\n                gl.bindAttribLocation(program, attribLocations[attrib], attrib);\n            }\n        }\n\n        gl.linkProgram(program);\n        const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n        if (success) {\n            return program;\n        }\n\n        console.error(gl.getProgramInfoLog(program));\n        gl.deleteProgram(program);\n    }\n\n    #setFramebuffer(gl, fbo, width, height) {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fbo); // all draw commands will affect the framebuffer\n        gl.viewport(0, 0, width, height);\n    }\n\n    #createAndSetupTexture(gl, minFilter, magFilter) {\n        const texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.MIRRORED_REPEAT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.MIRRORED_REPEAT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, magFilter);\n        return texture;\n    }\n\n    #resizeTextures(gl) {\n        const clientWidth = gl.canvas.clientWidth;\n        const clientHeight = gl.canvas.clientHeight;\n        this.colorFBOWidth = clientWidth;\n        this.colorFBOHeight = clientHeight;\n        this.ssaoFBOWidth = this.colorFBOWidth * this.SSAO_SCALE;\n        this.ssaoFBOHeight = this.colorFBOHeight * this.SSAO_SCALE;\n\n        // resize color textures and buffers\n        gl.bindTexture(gl.TEXTURE_2D, this.depthTexture);\n        gl.texImage2D(this. gl.TEXTURE_2D, 0, gl.DEPTH_COMPONENT32F, this.colorFBOWidth, this.colorFBOHeight, 0, gl.DEPTH_COMPONENT, gl.FLOAT, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.colorTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.colorFBOWidth, this.colorFBOHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        // recreate the normal texture\n        this.normalTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.normalTexture);\n        gl.texStorage2D(gl.TEXTURE_2D, 1, gl.RGBA16F, this.colorFBOWidth, this.colorFBOHeight);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.colorFramebuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT1, gl.TEXTURE_2D, this.normalTexture, 0);\n\n        // recreate the position texture\n        this.positionTexture = this.#createAndSetupTexture(gl, gl.LINEAR, gl.LINEAR);\n        gl.bindTexture(gl.TEXTURE_2D, this.positionTexture);\n        gl.texStorage2D(gl.TEXTURE_2D, 1, gl.RGBA16F, this.colorFBOWidth, this.colorFBOHeight);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.colorFramebuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT2, gl.TEXTURE_2D, this.positionTexture, 0);\n\n        // resize ssao texture\n        gl.bindTexture(gl.TEXTURE_2D, this.ssaoTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.ssaoFBOWidth, this.ssaoFBOHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n\n        // resize blur pass textures\n        gl.bindTexture(gl.TEXTURE_2D, this.horizontalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.ssaoFBOWidth, this.ssaoFBOHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.verticalBlurTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.ssaoFBOWidth, this.ssaoFBOHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        \n        // reset bindings\n        gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n\n    #updateCameraMatrix() {\n        mat4.targetTo(this.camera.matrix, this.camera.position, [0, 0, 0], this.camera.up);\n        mat4.invert(this.colorUniforms.u_viewMatrix, this.camera.matrix);\n    }\n\n    #updateProjectionMatrix(gl) {\n        const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n        mat4.perspective(this.colorUniforms.u_projectionMatrix, Math.PI / 4, aspect, this.camera.near, this.camera.far);\n    }\n\n    #resizeCanvasToDisplaySize(canvas) {\n        // Lookup the size the browser is displaying the canvas in CSS pixels.\n        const displayWidth  = canvas.clientWidth;\n        const displayHeight = canvas.clientHeight;\n       \n        // Check if the canvas is not the same size.\n        const needResize = canvas.width  !== displayWidth ||\n                           canvas.height !== displayHeight;\n       \n        if (needResize) {\n          // Make the canvas the same size\n          canvas.width  = displayWidth;\n          canvas.height = displayHeight;\n        }\n       \n        return needResize;\n    }\n\n    #initTweakpane() {\n        if (this.pane) {\n            const maxFar = 200;\n\n            this.fpsGraph = this.pane.addBlade({\n                view: 'fpsgraph',\n                label: 'fps',\n                lineCount: 1,\n                maxValue: 120,\n                minValue: 0\n            });\n\n            const cameraFolder = this.pane.addFolder({ title: 'Camera' });\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'near', 'near', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n            this.#createTweakpaneSlider(cameraFolder, this.camera, 'far', 'far', 1, maxFar, null, () => this.#updateProjectionMatrix(this.gl));\n\n            const ssaoSettings = this.pane.addFolder({ title: 'SSAO Settings' });\n            this.#createTweakpaneSlider(ssaoSettings, this.ssao, 'maxKernelRadius', 'radius', 5, 200);\n            this.#createTweakpaneSlider(ssaoSettings, this.ssao, 'attenuationScale', 'attenuation', 0.05, 0.5);\n            this.#createTweakpaneSlider(ssaoSettings, this.ssao, 'bias', 'bias', 0.01, 1);\n            this.#createTweakpaneSlider(ssaoSettings, this.ssao, 'blurScale', 'blur', 1, 10);\n            ssaoSettings.addInput(this.ssao, 'enableBlur');\n\n            const passSettings = this.pane.addFolder({ title: 'Passes' });\n            passSettings.addInput(this, 'passIndex', {\n                view: 'radiogrid',\n                groupName: 'pass',\n                size: [1, 3],\n                cells: (x, y) => ({\n                  title: `${this.passLabels[y]}`,\n                  value: y,\n                }),\n                label: 'pass',\n              });\n        }\n    }\n\n    #createTweakpaneSlider(folder, obj, propName, label, min, max, stepSize = null, callback) {\n        const slider = folder.addBlade({\n            view: 'slider',\n            label,\n            min,\n            max,\n            step: stepSize,\n            value: obj[propName],\n        });\n        slider.on('change', e => {\n            obj[propName] = e.value;\n            if(callback) callback();\n        });\n    }\n}\n","#version 300 es\n\nuniform mat4 u_worldMatrix;\nuniform mat4 u_viewMatrix;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_worldInverseTransposeMatrix;\nuniform vec3 u_cameraPosition;\n\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_uv;\n\nout vec3 v_position;\nout vec3 v_viewPosition;\nout vec3 v_normal;\nout vec3 v_viewNormal;\nout vec2 v_uv;\nout vec3 v_surfaceToView;\n\nvoid main() {\n    v_uv = a_uv;\n    v_normal = (u_worldInverseTransposeMatrix * vec4(a_normal, 0.)).xyz;\n    vec4 worldPosition = u_worldMatrix * vec4(a_position, 1.);\n    vec4 viewPosition = u_viewMatrix * worldPosition;\n    gl_Position = u_projectionMatrix * viewPosition;\n    v_surfaceToView = u_cameraPosition - worldPosition.xyz;\n    v_position = a_position.xyz;\n    v_viewPosition = viewPosition.xyz;\n    v_viewNormal = (u_viewMatrix * vec4(v_normal, 0.)).xyz;\n}\n","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_envMap;\nuniform vec3 u_color;\nuniform float u_frames;\n\nin vec3 v_position;\nin vec3 v_normal;\nin vec3 v_viewNormal;\nin vec2 v_uv;\nin vec3 v_surfaceToView;\nin vec3 v_viewPosition;\n\nlayout(location = 0) out vec4 outColor;\nlayout(location = 1) out vec4 outNormals;\nlayout(location = 2) out vec4 outPosition;\n\n#define PI 3.1415926535\n\nvoid main() {\n    vec3 pos = v_position;\n    vec3 N = normalize(v_normal);\n    vec3 V = normalize(v_surfaceToView);\n    vec3 L = normalize(vec3(0., 1., 1.));\n    float NdL = dot(N, L);\n\n    // calculate the reflection vector\n    float NdV = dot(N, V);\n    vec3 R = NdV * N * 2. - V;\n    R = normalize(R);\n\n    // calculate the half vector\n    vec3 H = normalize(V + N);\n\n    // base color\n    vec3 albedo = u_color;\n\n    // ambient ligthing\n    float phi   = atan(R.z, R.x);\n\tfloat theta = acos(R.y);\n    vec2 equiPos = vec2(phi / (2. * PI), theta / PI);\n    vec3 ambient = texture(u_envMap, equiPos).rgb;\n\n    // fresnel term\n    float fresnel = min(1., pow(1. - NdV, 1.));\n\n    // diffuse shading\n    float diffuse = max(0., NdL) * 0.15;\n\n    // specular shading\n    float specular = pow(max(0., dot(H, L)), 12.) * 0.9;\n\n    // color\n    vec3 color = albedo + ambient * fresnel * .4 + specular * 0.1 + diffuse;\n\n    outColor = vec4(color, 1.);\n    //outColor = vec4(N * 0.5 + .5, 1.);\n\n    outNormals = vec4(normalize(v_viewNormal), 0.);\n    outPosition = vec4(v_viewPosition, 0.);\n}\n","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_colorTexture;\nuniform sampler2D u_ssaoTexture;\nuniform int u_passIndex;\n\nout vec4 outColor;\n\nconst int PASS_COMPOSITE = 0;\nconst int PASS_SSAO = 1;\nconst int PASS_COLOR = 2;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_colorTexture, 0));\n    vec4 color = texture(u_colorTexture, uv);\n    float ssao = texture(u_ssaoTexture, uv).r;\n\n    switch(u_passIndex) {\n        case PASS_COLOR:\n            outColor = color;\n            break;\n        case PASS_SSAO:\n            outColor = vec4(ssao);\n            break;\n        default:\n            outColor = color * ssao;\n    }\n}","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_depthTexture;\nuniform sampler2D u_normalTexture;\nuniform sampler2D u_positionTexture;\nuniform sampler2D u_noiseTexture;\nuniform mat4 u_inversProjectionMatrix;\nuniform float u_bias;\nuniform float u_attentuationScale;\nuniform float u_maxKernelRadius;\nuniform float u_near;\nuniform float u_far;\nuniform float u_scale;\n\nout float outOcclusion;\n\n#define SIN45 0.707107\n\n// reconstructs the view space position given the screen space coordinates\n// along with the depth\nvec3 reconstructPosition(vec2 uv, float depth) {\n    float x = uv.x * 2. - 1.;   // = x / w\n    float y = uv.y * 2. - 1.;   // = y / w\n    float z = depth * 2. - 1.;\n    vec4 projectedPosition = vec4(x, y, z, 1.);\n    vec4 pos = u_inversProjectionMatrix * projectedPosition;\n    return pos.xyz / pos.w;\n}\n\n// reads the view space position from the buffer\nvec3 getViewPosition(vec2 uv) {\n    return texture(u_positionTexture, uv).xyz;\n}\n\nfloat getOcclusion(vec3 origin, vec3 normal, vec2 position, float radius) {\n    float occluderDepth = texture(u_depthTexture, position).x;\n    //vec3 occluderPosition = reconstructPosition(position, occluderDepth);\n    vec3 occluderPosition = getViewPosition(position);\n    vec3 dir = occluderPosition - origin;\n    float inRange = smoothstep(0., 1., (radius * u_attentuationScale) / length(dir));\n    float intensity = max(dot(normal, normalize(dir)) - u_bias, 0.);\n    float attenuation = ((radius * u_attentuationScale) / length(dir)) * inRange;\n\n    return intensity * attenuation;\n}\n\nvoid main() {\n    vec2 texelSize = 1. / (vec2(textureSize(u_depthTexture, 0)) * u_scale);\n    vec2 p = gl_FragCoord.xy * texelSize;\n    float depth = texture(u_depthTexture, p).x;\n    vec3 normal = normalize(texture(u_normalTexture, p).xyz);\n    //vec3 position = reconstructPosition(p, depth);\n    vec3 position = getViewPosition(p);\n    vec2 n1 = normalize(texture(u_noiseTexture, p).xy);\n    vec2 n2 = abs(normalize(texture(u_noiseTexture, p * 2.).xy)) * 0.7 + 0.3;\n    vec2 n3 = abs(normalize(texture(u_noiseTexture, p * 3.).xy)) * 0.7 + 0.3;\n\n    float liu_nearDepth = (-position.z - u_near) / (u_far - u_near);\n    float kernelRadius = u_maxKernelRadius * (1.0 - liu_nearDepth);\n\n    const int KERNEL_SIZE = 4;\n    vec2 kernel[KERNEL_SIZE];\n    kernel[0] = vec2(1., 0.);\n    kernel[1] = vec2(.0, 1.);\n    kernel[2] = vec2(-1., 0.);\n    kernel[3] = vec2(.0, -1.);\n\n    for(int i=0; i<KERNEL_SIZE; ++i) {\n        vec2 p1 = reflect(kernel[i], n1);\n        vec2 p2 = vec2(p1.x * SIN45 - p1.y * SIN45, p1.x * SIN45 + p1.y * SIN45);\n\n        p1 *= kernelRadius * texelSize;\n        p2 *= kernelRadius * texelSize;\n\n        outOcclusion += getOcclusion(position, normal, p + p1 * n3.y, kernelRadius);\n        outOcclusion += getOcclusion(position, normal, p + p2 * n2.x, kernelRadius);\n        outOcclusion += getOcclusion(position, normal, p + p1 * n2.y, kernelRadius);\n        outOcclusion += getOcclusion(position, normal, p + p2 * n3.x, kernelRadius);\n    }\n\n    outOcclusion = 1. - clamp(outOcclusion / (float(KERNEL_SIZE) * 4.), 0., 1.);\n}","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_colorTexture;\nuniform sampler2D u_depthTexture;\nuniform float u_scale;\n\nout vec4 blurColor;\n\n#pragma glslify: blur = require('./bilateral-gaussian-blur.glsl', tex=texture, texSize=textureSize)\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_colorTexture, 0));\n\n    blur(\n        uv,\n        vec2(1., 0.),\n        u_scale,\n        u_colorTexture,\n        u_depthTexture,\n        blurColor\n    );\n}","#version 300 es\n\nin vec2 a_position;\n\nvoid main() {\n    gl_Position = vec4(a_position, 0., 1.);\n}","#version 300 es\n\nprecision highp float;\n\nuniform sampler2D u_colorTexture;\nuniform sampler2D u_depthTexture;\nuniform float u_scale;\n\nout vec4 blurColor;\n\n#pragma glslify: blur = require('./bilateral-gaussian-blur.glsl', tex=texture, texSize=textureSize)\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / vec2(textureSize(u_colorTexture, 0));\n\n    blur(\n        uv,\n        vec2(0., 1.),\n        u_scale,\n        u_colorTexture,\n        u_depthTexture,\n        blurColor\n    );\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"4MRyY\")).toString();","import { Pane } from 'tweakpane';\nimport * as EssentialsPlugin from '@tweakpane/plugin-essentials';\nimport { SSAODemo } from './ssao-demo';\n\nconst queryString = window.location.search;\nconst urlParams = new URLSearchParams(queryString);\nconst debugParam = urlParams.get('debug');\n\nlet DEBUG = debugParam !== null;\n\nif (process.env.NODE_ENV !== 'production') {\n    // Only runs in development and will be stripped in production builds.\n    DEBUG = true;\n}\n\nlet sketch;\nlet resizeTimeoutId;\n\nwindow.addEventListener('load', () => {\n    const canvas = document.body.querySelector('#c');\n\n    let pane;\n    if (DEBUG) {\n        pane = new Pane({ title: 'Settings' });\n        pane.registerPlugin(EssentialsPlugin);\n    }\n\n    sketch = new SSAODemo(canvas, pane, (sketch) => {\n        sketch.run(); \n    });\n});\n\nwindow.addEventListener('resize', () => {\n    if (sketch) {\n        if (resizeTimeoutId)\n            clearTimeout(resizeTimeoutId);\n\n        resizeTimeoutId = setTimeout(() => {\n            resizeTimeoutId = null;\n            sketch.resize();\n        }, 300);\n    }\n});\n\n\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","global","factory","$3e4dfb3336db3303$exports","define","amd","globalThis","self","Tweakpane","exports","BladeApi","disabled","this","controller_","viewProps","get","set","hidden","dispose","controller","TpEvent","target","TpChangeEvent","value","presetKey","last","super","TpUpdateEvent","TpFoldEvent","expanded","isEmpty","deepEqualsArray","a1","a2","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","name","nomatchingcontroller","key","nomatchingview","stringify","params","notbindable","propertynotfound","shouldneverhappen","TpError","type","config","_a","message","constructor","stack","BindingTarget","obj","key_","presetKey_","read","obj_","write","writeProperty","valueObj","isBindable","notBindable","propertyNotFound","opt_id","ButtonApi","label","props","title","valueController","on","eventName","handler","bh","bind","emitter","Emitter","observers","observers_","push","off","filter","observer","emit","event","forEach","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","join","extractValue","ev","rawValue","bindValue","applyValue","h1","h2","input","bindValueMap","valueMap","valueToClassName","elem","className","active","classList","add","remove","applyClass","bindValueToTextContent","text","textContent","className$q","ButtonView","doc","element","createElement","bindClassModifiers","buttonElem","bindDisabled","appendChild","buttonElement","titleElem","ButtonController","onClick_","sender","view","addEventListener","BoundValue","constraint","constraint_","rawValue_","setRawValue","forceEmit","options","opts","constrainedValue","constrain","equals_","initialValue","equals","v1","v2","PrimitiveValue","value_","createValue","ValueMap","reduce","o","assign","core","createCore","valMap_","createParamsParserBuilder","optional","v","undefined","succeeded","result","createParamsParserBuilders","custom","boolean","number","string","function","constant","raw","object","keyToParserMap","tmp","parser","parseObject","array","itemParser","parseItem","Array","isArray","item","ParamsParsers","required","parseParams","className$p","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent","parent_","blade","pos","handleDispose","parentElement","removeChild","disposeElement","SVG_NS","forceReflow","offsetHeight","supportsTouch","ontouchstart","getWindowDocument","Function","document","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","index","insertBefore","children","removeElement","removeChildElements","findNextTarget","relatedTarget","explicitOriginalTarget","className$o","LabelView","labelElem","childNodes","removeChildNodes","frag","createDocumentFragment","split","map","line","createTextNode","lineNode","createLabelNode","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","accept","p","args","fromObject","api","ValueBladeController","createBlade","positions","Foldable","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","styleHeight","exHeight","bindExpandedClass","expandedClassName","applyHeight","foldable","style","height","bindFoldable","folder","containerElement","callback","t","transition","disableTransitionTemporarily","clientHeight","computeExpandedFolderHeight","propertyName","RackLikeApi","rackApi","rackApi_","NestedOrderedSet","items","items_","allItems","from","cache_","find","includes","has","item1","opt_index","shouldNeverHappen","splice","subList","extract_","onSubListAdd_","onSubListRemove_","root","indexOf","delete","extract","Set","InputBindingApi","emitter_","refresh","binding","onBindingChange_","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","findSubBladeApiSet","RackApi","getApiByController","apiSet","api1","createBindingTarget","rack","bc","apiSet_","addInput","opt_params","ownerDocument","pool_","createInput","addMonitor","createMonitor","addFolder","addBlade","addFolderAsBlade","addButton","addButtonAsBlade","addSeparator","addSeparatorAsBlade","addTab","addTabAsBlade","gapi","a","createBladeApi","setUpApi_","onRackAdd_","bladeController","onRackRemove_","isRoot","onRackInputChange_","onRackMonitorUpdate_","pool","FolderApi","rackController","RackLikeController","PlainView","findSubRack","RackController","findSubBladeControllerSet","BladeRack","bcSet_","controllerClass","onSetAdd_","updatePositions_","onChildViewPropsChange_","onChildPositionsChange_","onChildDispose_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","onSetRemove_","visibleItems","firstVisibleItem","lastVisibleItem","ps","blade_","_ev","bcs","b","findInputBindingController","findMonitorBindingController","findValueBladeController","_","onBladePositionsChange_","bladeContainerClassName","FolderView","className_","foldable_","titleElement","markElem","containerElem","FolderController","onTitleClick_","create","rc","FolderBladePlugin","LabeledValueController","SeparatorApi","className$n","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$m","valueToModifier","modifier","ViewProps","opt_initialValue","_b","disposed","bindTabIndex","tabIndex","className$l","TabItemView","selected","TabItemController","TabPageController","itemController","ic_","contentController","cc_","onItemClick_","itemProps","TabPageApi","contentRackApi","TabApi","pages","pageSet","pc","pageApiMap_","addPage","removePage","setUpPageApi_","api3","onPageAdd_","onPageRemove_","Map","className$k","TabView","empty","itemsElem","itemsElement","contentsElem","contentsElement","TabController","pageSet_","applyPages_","keepSelection_","empty_","onPageSelectedChange_","firstSelIndex","findIndex","cr","TabBladePlugin","c","ManualTicker","tick","IntervalTicker","disabled_","inactive","clearTimer_","setTimer_","timerId_","win","doc_","defaultView","clearInterval","interval_","setInterval","onTick_","interval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","RangeConstraint","minValue","Math","max","maxValue","min","StepConstraint","round","step","className$j","ListView","update_","selectElement","String","onValueChange_","props_","selectElem","optionElem","dataset","ListController","onSelectChange_","e","optElem","currentTarget","selectedOptions","itemIndex","Number","className$i","PopupView","shows","PopupController","className$h","TextView","formatter","inputElement","onChange_","inputElem","TextController","onInputChange_","parsedValue","parser_","boolFromUnknown","BooleanFormatter","boolToString","NumberLiteralNode","evaluate","toString","BINARY_OPERATION_MAP","pow","BinaryOperationNode","op","operator","left","right","UNARY_OPERATION_MAP","UnaryOperationNode","expression","expr","combineReader","parsers","cursor","readWhitespace","m","substr","match","readDecimalDigits","readExponentPart","toLowerCase","si","ds","sign","sds","readSignedInteger","readDecimalIntegerLiteral","ch","nzd","readNonZeroDigit","readDecimalLiteral","dil","dot","dds","readNonDecimalIntegerLiteral","prefix","bds","parseBinaryDigits","ods","readOctalDigits","hds","readHexDigits","readNumericLiteral","parsePrimaryExpression","num","evaluable","parseLiteral","parseExpression","cl","parseParenthesizedExpression","readBinaryOperator","ops","op1","startsWith","parseBinaryOperationExpression","exprParser","firstExpr","nextExpr","createBinaryOperationExpressionParser","parseUnaryExpression","parseNumber","r","parseEcmaNumberExpression","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","slice","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isArrowKey","isVerticalArrowKey","computeOffset$1","rect","getBoundingClientRect","x","pageX","scrollX","y","pageY","scrollY","top","PointerHandler","computePosition_","offset","elem_","bounds","width","point","onMouseDown_","preventDefault","focus","onDocumentMouseMove_","onDocumentMouseUp_","data","removeEventListener","onTouchStart_","touch","targetTouches","clientX","clientY","lastTouch_","onTouchMove_","onTouchEnd_","passive","mapRange","start1","end1","start2","end2","getDecimalDigits","replace","constrainRange","loopRange","className$g","NumberTextView","onDraggingChange_","aox","adx","guideHeadElem_","setAttributeNS","guideBodyElem_","tooltipElem_","arrayPosition","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","headElem","tooltipElem","NumberTextController","onInputKeyDown_","baseStep_","onInputKeyUp_","onPointerDown_","originRawValue_","computeDraggingValue_","dx","onPointerMove_","onPointerUp_","ph","className$f","SliderView","trackElem","trackElement","SliderController","handlePointerEvent_","d","onPointerDownOrMove_","onKeyDown_","onKeyUp_","ptHandler_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderController","sliderC_","textController","textC_","sliderProps","textProps","writePrimitive","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","findListItems","getSuitableDecimalDigits","getBaseStep","findStep","getSuitableDraggingScale","base","abs","floor","log10","className$d","CheckboxView","checked","wrapperElem","CheckboxController","BooleanInputPlugin","reader","_args","lc","createConstraint$5","writer","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","hsvToRgb","h","s","hp","sp","vp","rp","gp","bp","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","l","hsv","sd","rgb","lp","g","cmax","cmin","CONSTRAINT_MAP","isRgbColorComponent","Color","color","toRgbaObject","isRgbColorObject","mode_","comps1","comps_","comps2","mode","getComponents","opt_mode","components","fromMode","toMode","rgbComps","className$b","ColorPickerView","allFocusableElements","elems","svPaletteView_","hPaletteView_","modeSelectElement","textViews","alphaViews_","palette","hsvElem","svElem","svPaletteView","hElem","hPaletteView","rgbElem","alphaViews","aElem","apElem","atElem","parseColorInputParams","picker","getBaseStepForColor","forAlpha","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","NOTATION_TO_PARSER_MAP","isNaN","mRgb","parseInt","mRrggbb","getColorNotation","notation","subparser","CompositeColorParser","hasAlphaComponent","colorFromString","cv","black","zerofill","comp","hex","colorToHexRgbString","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","NOTATION_TO_STRINGIFIER_MAP","formatters","getColorStringifier","className$a","APaletteView","leftColor","rightColor","gradientComps","colorElem_","background","previewElem_","backgroundColor","markerElem_","barElem","colorElem","markerElem","previewElem","APaletteController","className$9","ColorTextView","modeElem_","textViews_","applyTextViews_","textsElem_","compElem","modeElem","createModeSelectElement","modeMarkerElem","textsElem","colorMode","FORMATTER","MODE_TO_CONSTRAINT_MAP","createComponentController","draggingScale","ColorTextController","createComponentControllers_","cc","ccs","cs","pickedMode","onModeSelectChange_","ccs_","className$8","HPaletteView","HPaletteController","hue","className$7","SvPaletteView","ctx","canvasElement","getContext","getCanvasContext","hsvComps","imgData","getImageData","iy","ix","putImageData","canvasElem","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","popC_","nextTarget","contains","onButtonClick_","pickerC_","onPopupChildBlur_","swatchC_","onPopupChildKeydown_","pickerC","colorFromObject","isColorObject","colorToRgbNumber","colorToRgbaNumber","colorFromRgbNumber","colorFromRgbaNumber","writeRgbaColorObject","writeRgbColorObject","shouldSupportAlpha$1","inputParams","createFormatter$1","NumberColorInputPlugin","colorToNumber","createColorNumberWriter","ObjectColorInputPlugin","createColorObjectWriter","isRgbaColorObject","StringColorInputPlugin","createColorStringWriter","stringifier","PointNdConstraint","asm_","toComponents","fromComponents","assembly","className$5","PointNdTextView","axisElem","PointNdTextController","acs_","axes","createAxisController","ac","createConstraint$4","createStepConstraint","createRangeConstraint","estimateSuitableRange","findRange","NumberInputPlugin","format","Point2d","toObject","Point2dAssembly","className$4","Point2dView","className$3","Point2dPickerView","padElement","maxValue_","px","py","ipy","invertsY_","lineElem_","onFoldableChange_","invertsY","layout","padElem","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","dy","baseSteps_","onPadKeyUp_","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","point2dFromUnknown","isObject","writePoint2d","createDimensionConstraint$2","getSuitableMaxDimensionValue","getSuitableMaxValue","xc","yc","xr","yr","createAxis$2","shouldInvertY","yParams","inverted","Point2dInputPlugin","createConstraint$3","Point3d","z","Point3dAssembly","point3dFromUnknown","writePoint3d","createDimensionConstraint$1","createAxis$1","Point3dInputPlugin","createConstraint$2","Point4d","w","Point4dAssembly","point4dFromUnknown","writePoint4d","createDimensionConstraint","Point4dInputPlugin","createConstraint$1","createAxis","StringInputPlugin","createConstraint","Constants","defaultInterval","defaultLineCount","className$2","MultiLogView","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","formatter_","onValueUpdate_","textareaElem","lineCount","readOnly","MultiLogController","className$1","SingleLogView","values","lastValue","SingleLogController","BooleanMonitorPlugin","GraphCursor","index_","className1","GraphLogView","graphElement","maxIndex","minValue_","points","cursor_","tx","ty","onCursorChange_","GraphLogController","onGraphMouseLeave_","onGraphMouseMove_","offsetX","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","createFormatter","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","_c","createGraphMonitor","createTextMonitor","StringMonitorPlugin","multiline","InputBinding","targetValue","write_","MonitorBinding","newValue","reader_","newBuffer","createPushedBuffer","createTicker","PluginPool","getAll","pluginsMap_","blades","inputs","monitors","unshift","plugin","valueArgs","createInputBindingController","P","bindingArgs","createMonitorBindingController","createBladeController","ListApi","SliderApi","TextApi","ListBladePlugin","ic","RootApi","importPreset","preset","targets","importPresetJson","ibc","exportPreset","exportPresetJson","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","embedStyle","css","querySelector","styleElem","tpStyle","head","VERSION","major","minor","patch","prerelease","coreComps","Pane","alreadyDisposed","containerElem_","usesDefaultWrapper_","parentElem","registerPlugin","bundle","plugins","embedPluginStyle_","setUpDefaultPlugins_","opt_config","createDefaultPluginPool","container","body","createDefaultWrapperElement","defineProperty","receiver","privateMap","TypeError","descriptor","writable","privateSet","fn","enumerable","configurable","$e2e8506aa5870950$exports","TweakpaneEssentialsPlugin","ButtonCellApi","TpButtonGridEvent","cell","ButtonGridApi","gc","cellControllers","size","cellToApiMap_","ButtonGridController","cellCs_","cellConfig","gridTemplateColumns","ButtonGridBladePlugin","cells","CubicBezierApi","interpolate","x1","x2","y1","cb","dt","curve","CubicBezier","y2","x01","y01","x12","y12","x23","y23","xr0","yr0","xr1","yr1","cache","CACHE_RESOLUTION","CubicBezierAssembly","cubicBezierToString","COMPS_EMPTY","cubicBezierFromString","n","CubicBezierView","iconElem","CubicBezierPickerView","graphElem","waitToBeAddedToDom","elem1","ob","MutationObserver","ml","addedNodes","disconnect","observe","attributes","childList","subtree","CubicBezierGraphView","getVertMargin_","valueToPosition","vm","positionToValue","guideElem_","p1","p2","bezier","vElem","vectorElems_","handleElems_","previewElement","sel_","selection","CubicBezierPreviewView","play","stop","updateMarker_","startTime_","Date","getTime","stopped_","requestAnimationFrame","onTimer_","onDispose_","progress","TICK_COUNT","ticksElem_","PREVIEW_DURATION","ticksElem","getDistance","sqrt","CubicBezierGraphController","prevView_","updateValue_","locksAngle","atan2","la","cos","sin","lockAngle","d1","d2","xStep","yStep","stopImmediatePropagation","ptHandler","CubicBezierPickerController","gc_","tc_","axis","xAxis","yAxis","CubicBezierController","CubicBezierBladePlugin","FpsGraphBladeApi","begin","end","Fpswatch","duration","duration_","fps","fps_","now","start_","calculateFps_","nowTime","timestamps_","ts","frameCount_","frameCount","time","compactTimestamps_","len","df","FpsView","unitElement","FpsGraphController","stopwatch_","ticker_","graphC_","FpsGraphBladePlugin","_d","Interval","IntervalAssembly","IntervalConstraint","_e","_f","_g","_h","edge","RangeSliderTextView","RangeSliderView","valueToX_","update","xs","barElement","knobElements","knobElems","RangeSliderController","ofs_","grabbing_","valueFromData_","pmin","pmax","grabOffset_","applyPointToValue_","RangeSliderTextController","sc_","intervalFromUnknown","writeInterval","IntervalInputPlugin","exValue","midValue","RadioCellApi","TpRadioGridChangeEvent","RadioGridApi","findCellByValue","capi","RadioView","RadioController","RadioGridController","cellValues_","onCellInputChange_","groupName","$0526ef4aedbd7991$export$b67359430d3b1b2","Float32Array","$0526ef4aedbd7991$export$5ada478c8a628231","random","$8c678e942362b0b9$export$185802fd694ee1f5","out","$8c678e942362b0b9$export$9cd59f9826255e47","$8c678e942362b0b9$export$784d13d8ee351f07","$8c678e942362b0b9$export$a82be99ed2a44a7d","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","$8c678e942362b0b9$export$adaa4cf7ef1b65be","$8c678e942362b0b9$export$f0954fd7d5368655","$8c678e942362b0b9$export$9cb09a71b7d66923","a01","a02","a03","a12","a13","a23","$8c678e942362b0b9$export$6897c284b6f9f4dc","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","$8c678e942362b0b9$export$33f3c024b4ae00a1","$8c678e942362b0b9$export$a04698f914c55ed9","$8c678e942362b0b9$export$2060d2db72cce88f","b0","b1","b2","b3","$8c678e942362b0b9$export$d73ee8ef04f5226a","$8c678e942362b0b9$export$dcdf75081b88279d","$8c678e942362b0b9$export$bb628a54ab399bc9","b12","b20","b21","b22","hypot","$8c678e942362b0b9$export$a59c8716592e09af","$8c678e942362b0b9$export$cf71e4d4ca4d1cfd","$8c678e942362b0b9$export$ea6eae3365de5b9c","$8c678e942362b0b9$export$bc9e79e74e9fddf6","$8c678e942362b0b9$export$832ca188ffb1955d","$8c678e942362b0b9$export$926fc125ff3c666c","$8c678e942362b0b9$export$dd47cc2f828c32ef","$8c678e942362b0b9$export$7dc997d67d2b7f33","$8c678e942362b0b9$export$ad5ddaedc8f405df","$8c678e942362b0b9$export$9545ac307f2a256b","q","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","$8c678e942362b0b9$export$ff497f2be31cc6a","translation","bx","by","bz","bw","ax","ay","az","aw","magnitude","$8c678e942362b0b9$export$202e99f82f7f0395","mat","$8c678e942362b0b9$export$71dc54d92bd04b57","$8c678e942362b0b9$export$df3937d3b537df0a","scaling","is1","is2","is3","sm11","sm12","sm13","sm21","sm22","sm23","sm31","sm32","sm33","trace","S","$8c678e942362b0b9$export$ddf9c55c9f2be172","sx","sy","sz","$8c678e942362b0b9$export$1def1f860edc4b1f","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","$8c678e942362b0b9$export$2ff2bbe382249af7","yx","zx","zy","$8c678e942362b0b9$export$89b5708c387cac6c","bottom","near","far","rl","tb","nf","$8c678e942362b0b9$export$4cf19729ec9a96b8","fovy","aspect","f","tan","Infinity","arguments","$8c678e942362b0b9$export$541149539f3a4684","$8c678e942362b0b9$export$294bba99a6af0c0c","$8c678e942362b0b9$export$58ae211c788e338f","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","$8c678e942362b0b9$export$c5f65ef3eb668f27","lr","bt","$8c678e942362b0b9$export$4f2167e613cfc87b","$8c678e942362b0b9$export$b1d31ea7b4d854e","$8c678e942362b0b9$export$d924e14fd6d9aa66","eye","center","up","x0","y0","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","$8c678e942362b0b9$export$aa67782f4dc9e52c","$8c678e942362b0b9$export$42d51816ce590c93","$8c678e942362b0b9$export$326827e8268e9cdb","$8c678e942362b0b9$export$e16d8520af44a096","$8c678e942362b0b9$export$4e2d2ead65e5f7e3","$8c678e942362b0b9$export$c697bed75648cdb7","$8c678e942362b0b9$export$553579f63bdd7137","$8c678e942362b0b9$export$f2599a5cf1109d8","$8c678e942362b0b9$export$e9bab7fafb253603","a0","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","$8c678e942362b0b9$export$6e3a27864ab166fe","$8c678e942362b0b9$export$f93b5905241a7cca","$b4d34f945b36eb1f$export$185802fd694ee1f5","$b4d34f945b36eb1f$export$9cd59f9826255e47","$b4d34f945b36eb1f$export$f24224f1c91d8156","$b4d34f945b36eb1f$export$a82be99ed2a44a7d","$b4d34f945b36eb1f$export$784d13d8ee351f07","$b4d34f945b36eb1f$export$adaa4cf7ef1b65be","$b4d34f945b36eb1f$export$e16d8520af44a096","$b4d34f945b36eb1f$export$4e2d2ead65e5f7e3","$b4d34f945b36eb1f$export$2060d2db72cce88f","$b4d34f945b36eb1f$export$cd007d971a5a2143","$b4d34f945b36eb1f$export$803ce6b71a0a94b2","ceil","$b4d34f945b36eb1f$export$a3fe094919f356fd","$b4d34f945b36eb1f$export$96ec731ed4dcb222","$b4d34f945b36eb1f$export$8960430cfd85939f","$b4d34f945b36eb1f$export$2077e0241d6afd3c","$b4d34f945b36eb1f$export$dcdf75081b88279d","$b4d34f945b36eb1f$export$19cedf1da84ba854","$b4d34f945b36eb1f$export$9f17032d917177de","$b4d34f945b36eb1f$export$88e6ebb4fe54f538","$b4d34f945b36eb1f$export$ab44e1323ffc8376","$b4d34f945b36eb1f$export$aef51622e549b8b0","$b4d34f945b36eb1f$export$70ae2c07e401031b","$b4d34f945b36eb1f$export$a3295358bff77e","$b4d34f945b36eb1f$export$fc1400facf92c78","$b4d34f945b36eb1f$export$94132a0e348806d4","$b4d34f945b36eb1f$export$bb646b20bb93d339","$b4d34f945b36eb1f$export$3a89f8d6f6bf6c9f","$b4d34f945b36eb1f$export$ae8865616f30561c","factorTimes2","factor1","factor2","factor3","factor4","$b4d34f945b36eb1f$export$b9c5f84610baddaf","inverseFactor","inverseFactorTimesTwo","$b4d34f945b36eb1f$export$4385e60b38654f68","zScale","$b4d34f945b36eb1f$export$5ffbd13800309d59","$b4d34f945b36eb1f$export$f0bfa0a0024626ee","$b4d34f945b36eb1f$export$c32adef9e939ce85","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","$b4d34f945b36eb1f$export$a59c8716592e09af","$b4d34f945b36eb1f$export$cf71e4d4ca4d1cfd","$b4d34f945b36eb1f$export$ea6eae3365de5b9c","$b4d34f945b36eb1f$export$944b09d2ad10b378","mag","cosine","acos","$b4d34f945b36eb1f$export$7f9972325ebfd559","$b4d34f945b36eb1f$export$42d51816ce590c93","$b4d34f945b36eb1f$export$f2599a5cf1109d8","$b4d34f945b36eb1f$export$e9bab7fafb253603","vec","$b4d34f945b36eb1f$export$f93b5905241a7cca","$b4d34f945b36eb1f$export$6e3a27864ab166fe","$b4d34f945b36eb1f$export$159d9494db57879b","$b4d34f945b36eb1f$export$6c4a311cc157c764","$b4d34f945b36eb1f$export$2422cd6c492a8b3a","$b4d34f945b36eb1f$export$99d8dd3f32a3435","$b4d34f945b36eb1f$export$4b80e395e36b5a56","stride","count","arg","$670b89df6ca628ce$export$f24224f1c91d8156","$670b89df6ca628ce$export$ab44e1323ffc8376","$b05eccd75d26bd5a$export$185802fd694ee1f5","$b05eccd75d26bd5a$export$f0954fd7d5368655","$b05eccd75d26bd5a$export$4286ddefc8f49512","$b05eccd75d26bd5a$export$3f70be5e7d7dc51","out_axis","$b05eccd75d26bd5a$export$b363da9ded343252","dotproduct","$b05eccd75d26bd5a$export$94132a0e348806d4","$b05eccd75d26bd5a$export$2060d2db72cce88f","$b05eccd75d26bd5a$export$a59c8716592e09af","$b05eccd75d26bd5a$export$cf71e4d4ca4d1cfd","$b05eccd75d26bd5a$export$ea6eae3365de5b9c","$b05eccd75d26bd5a$export$fb72b72e8d764d4e","$b05eccd75d26bd5a$export$b310ec824aaee37f","et","exp","$b05eccd75d26bd5a$export$876cb1b29620556f","log","$b05eccd75d26bd5a$export$9c297f60e22e3389","$b05eccd75d26bd5a$export$dcdf75081b88279d","$b05eccd75d26bd5a$export$1544d9bc2995de08","omega","cosom","sinom","scale0","scale1","$b05eccd75d26bd5a$export$4385e60b38654f68","u1","u2","u3","sqrt1MinusU1","sqrtU1","$b05eccd75d26bd5a$export$6897c284b6f9f4dc","invDot","$b05eccd75d26bd5a$export$7679f47e72c62560","$b05eccd75d26bd5a$export$272a1eb8e5a4b55b","fRoot","fTrace","j","k","$b05eccd75d26bd5a$export$7a404a587ea85af","halfToRad","cx","cy","cz","$b05eccd75d26bd5a$export$42d51816ce590c93","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","$b05eccd75d26bd5a$export$9cd59f9826255e47","$b05eccd75d26bd5a$export$a82be99ed2a44a7d","$b05eccd75d26bd5a$export$784d13d8ee351f07","$b05eccd75d26bd5a$export$adaa4cf7ef1b65be","$b05eccd75d26bd5a$export$e16d8520af44a096","$b05eccd75d26bd5a$export$6e3a27864ab166fe","$b05eccd75d26bd5a$export$3a89f8d6f6bf6c9f","$b05eccd75d26bd5a$export$f24224f1c91d8156","$b05eccd75d26bd5a$export$fc1400facf92c78","$b05eccd75d26bd5a$export$ab44e1323ffc8376","$b05eccd75d26bd5a$export$99d8dd3f32a3435","$b05eccd75d26bd5a$export$a3295358bff77e","$670b89df6ca628ce$export$fc1400facf92c78","$b05eccd75d26bd5a$export$f2599a5cf1109d8","$b05eccd75d26bd5a$export$e9bab7fafb253603","$b05eccd75d26bd5a$export$72d66f5842c00904","$b05eccd75d26bd5a$export$699b0866ca50f6cb","$b05eccd75d26bd5a$export$937ca0a544b2d712","$56f78f1c3bf4e5b9$export$5dc878ab9e1f1ddf","deltaTime","timeScale","pointerDown","damping","followPos","pointerPos","delta","prevFollowPos","speed","phi","theta","decc","prevRotation","camera","rotation","velocity","$b05eccd75d26bd5a$exports","fromEuler","orbit","$b4d34f945b36eb1f$exports","transformQuat","position","distance","updateCallback","canvas","pointerDownPos","touchAction","pointerDownCameraUp","pointerDownRotation","$84c426094f29c1f5$export$418f4e74cfe71a96","depth","radius","radiusSegments","edgeHalfWidth","edgeHalfHeight","edgeHalfDepth","rs1","totalVertexCount","normals","cornerVerts","cornerNormals","vertex","vertexPool","normalPool","indices","lastVertex","cornerVertNumber","cornerLayout","fromValues","PIhalf","cornerOffset","va","cosVa","sinVa","ha","vert","clone","scale","norm","normalize","j1","multiply","flips","lastRowOffset","i1","r1","r2","u","i2","cOffset","cRowOffset","needsFlip","cStartsW","cEndsW","i3","cStart","cEnd","cStartsD","cEndsD","i4","cStartD","cEndD","urs1","u1rs1","i5","vertices","_render","WeakSet","_renderCube","_init","_initEnvMap","_createBuffer","_initOrbitControls","_createFramebuffer","_makeVertexArray","_createShader","_createProgram","_setFramebuffer","_createAndSetupTexture","_resizeTextures","_updateCameraMatrix","_updateProjectionMatrix","_resizeCanvasToDisplaySize","_initTweakpane","_createTweakpaneSlider","$f69e5d7eae5d309a$export$a7dae26ca7d158ea","resize","gl","resizeCanvasToDisplaySize","call","viewport","drawingBufferWidth","drawingBufferHeight","resizeTextures","updateProjectionMatrix","run","fpsGraph","_deltaTime","$bc3c910e665b60ca$export$2e2bcd8739ae039","_time","_frames","_isDestroyed","control","render","destroy","pane","oninit","PASS_COMPOSITE","matrix","$8c678e942362b0b9$exports","bias","maxKernelRadius","blurScale","attenuationScale","enableBlur","init","WeakMap","enable","DEPTH_TEST","CULL_FACE","setFramebuffer","colorFramebuffer","colorFBOWidth","colorFBOHeight","useProgram","colorProgram","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","clearColor","uniformMatrix4fv","colorLocations","u_viewMatrix","colorUniforms","u_projectionMatrix","uniform3f","u_cameraPosition","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","envMapTexture","uniform1i","u_envMap","s1","s2","s3","acc","renderCube","cube1VAO","cube1Buffers","numElem","cube2VAO","cube2Buffers","cube3VAO","cube3Buffers","ssaoFramebuffer","ssaoFBOWidth","ssaoFBOHeight","ssaoProgram","bindVertexArray","quadVAO","depthTexture","ssaoLocations","u_depthTexture","TEXTURE1","normalTexture","u_normalTexture","TEXTURE2","noiseTexture","u_noiseTexture","TEXTURE3","positionTexture","u_positionTexture","uniform1f","u_bias","ssao","u_maxKernelRadius","u_attentuationScale","u_scale","SSAO_SCALE","u_near","u_far","drawArrays","TRIANGLES","quadBuffers","horizontalBlurFramebuffer","horizontalBlurProgram","horizontalBlurLocations","ssaoTexture","u_colorTexture","verticalBlurFramebuffer","verticalBlurProgram","verticalBlurLocations","horizontalBlurTexture","compositeProgram","colorTexture","compositeLocations","verticalBlurTexture","u_ssaoTexture","u_passIndex","passIndex","vao","numElm","rotationAxis","worldMatrix","translate","rotate","worldInverseTransposeMatrix","invert","transpose","u_worldMatrix","u_worldInverseTransposeMatrix","u_color","drawElements","UNSIGNED_SHORT","antialias","getExtension","console","error","$57ffde4c0031b911$export$2e2bcd8739ae039","createProgram","$parcel$interopDefault","a_position","a_normal","a_uv","getAttribLocation","getUniformLocation","cube1Geometry","createBuffer","normal","makeVertexArray","cube2Geometry","cube3Geometry","quadPositions","clientWidth","createAndSetupTexture","NEAREST","texImage2D","DEPTH_COMPONENT32F","DEPTH_COMPONENT","FLOAT","LINEAR","RGBA","UNSIGNED_BYTE","texStorage2D","RGBA16F","createFramebuffer","R8","RED","noiseTextureSize","noiseTextureData","ndx","RG16F","texSubImage2D","RG","initEnvMap","updateCameraMatrix","initOrbitControls","initTweakpane","img","Image","src","URL","$731e2e8817bc200b$exports","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","colorAttachements","depthAttachement","fbo","drawBuffers","bindFramebuffer","FRAMEBUFFER","texture","attachmentPoint","framebufferTexture2D","DEPTH_ATTACHMENT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","bufLocNumElmPairs","createVertexArray","loc","enableVertexAttribArray","vertexAttribPointer","indexBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","createShader","source","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","shaderSources","transformFeedbackVaryings","attribLocations","program","VERTEX_SHADER","FRAGMENT_SHADER","attachShader","SEPARATE_ATTRIBS","attrib","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","minFilter","magFilter","createTexture","texParameteri","TEXTURE_WRAP_S","MIRRORED_REPEAT","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","COLOR_ATTACHMENT1","COLOR_ATTACHMENT2","bindRenderbuffer","RENDERBUFFER","targetTo","perspective","displayWidth","displayHeight","needResize","maxFar","cameraFolder","createTweakpaneSlider","ssaoSettings","passLabels","propName","stepSize","resolve","import","meta","url","$6f40c3a58f594b58$var$queryString","window","location","search","$6f40c3a58f594b58$var$sketch","$6f40c3a58f594b58$var$resizeTimeoutId","$6f40c3a58f594b58$var$DEBUG","URLSearchParams","sketch","clearTimeout","setTimeout"],"version":3,"file":"index.3fd5628e.js.map"}